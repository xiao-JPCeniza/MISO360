import{d as G,g as v,r as Q,c as d,a as x,u as c,h as P,w as R,o as l,b as e,j as T,v as C,t as r,k as S,F as B,n as D,p as b,m as O,l as U,e as J}from"./app-Bz5YFX80.js";import{_ as k}from"./Icon.vue_vue_type_script_setup_true_lang-DRLq77En.js";import{_ as K}from"./AppLayout.vue_vue_type_script_setup_true_lang-Bk3RW129.js";import{d as W}from"./lazy-CSzc0j1S.js";import"./upload-DY5orng5.js";import"./trash-2-Bc4u38B2.js";import"./camera-CDRLtcGs.js";import"./check-YYHeAPsf.js";import"./image-B8JV3eqN.js";import"./sun-ZaxvDMs6.js";import"./user-plus-BrFMXlTI.js";const w="inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] font-medium leading-4",u={amber:"border-amber-500/30 bg-amber-500/10 text-amber-700 dark:text-amber-300",blue:"border-blue-500/30 bg-blue-500/10 text-blue-700 dark:text-blue-300",emerald:"border-emerald-500/30 bg-emerald-500/10 text-emerald-700 dark:text-emerald-300",rose:"border-rose-500/30 bg-rose-500/10 text-rose-700 dark:text-rose-300",purple:"border-purple-500/30 bg-purple-500/10 text-purple-700 dark:text-purple-300",slate:"border-slate-500/20 bg-slate-500/10 text-slate-600 dark:text-slate-300"};function V(m){return(m??"").trim().toLowerCase()}function z(m){const n=V(m);return n.includes("completed")||n.includes("closed")?u.emerald:n.includes("ongoing")||n.includes("assigned")?u.blue:n.includes("pending")||n.includes("review")?u.amber:u.slate}function A(m){const n=V(m);return n.includes("simple")?u.emerald:n.includes("complex")?u.purple:n.includes("urgent")?u.rose:n.includes("average")||n.includes("moderate")?u.amber:u.slate}const X={key:0,class:"flex flex-1 flex-col bg-background p-5 sm:p-6"},Y={class:"flex flex-col gap-2"},Z={class:"relative w-full max-w-xs"},q={class:"text-[11px] text-muted-foreground"},ee={class:"mt-3 rounded-md border border-border bg-card shadow-sm dark:border-white/10"},te={class:"max-h-[560px] overflow-auto"},se={class:"w-full min-w-[980px] text-[11px] text-foreground"},oe={class:"divide-y divide-border text-xs text-foreground dark:divide-white/10"},re={class:"px-3 py-2 font-medium"},ne={class:"px-3 py-2"},ae=["title"],le={class:"px-3 py-2"},ie=["title"],de={class:"px-3 py-2"},ce=["title"],pe={class:"px-3 py-2 text-muted-foreground"},ue={class:"px-3 py-2"},me=["title"],fe={class:"px-3 py-2"},xe=["title"],be={class:"px-3 py-2"},he=["title"],ge={class:"px-3 py-2"},ye=["title"],_e={class:"px-3 py-2"},ke={key:1,class:"inline-flex h-6 w-6 items-center justify-center rounded border border-border text-muted-foreground dark:border-white/20"},we={key:0},ve={key:1,class:"flex flex-1 flex-col gap-5 p-6"},Re={class:"flex flex-col gap-3"},Be={class:"text-xs uppercase tracking-[0.2em] text-muted-foreground"},Ne={class:"text-xl font-semibold text-foreground"},Te={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},Ce={class:"relative w-full sm:max-w-sm"},Se={class:"text-xs text-muted-foreground"},De={class:"rounded-2xl border border-sidebar-border/60 bg-background shadow-sm"},Oe={class:"max-h-[560px] overflow-auto"},Ue={class:"w-full min-w-[1200px] text-sm"},ze={class:"divide-y divide-muted/40 text-sm text-foreground"},Ae={class:"px-3 py-2 font-medium"},Fe={key:1},Ve={class:"px-3 py-2"},je=["title"],He={class:"px-3 py-2"},Ee=["title"],Le={class:"px-3 py-2 text-muted-foreground"},$e={class:"px-3 py-2"},Ie=["title"],Me={class:"px-3 py-2"},Ge=["title"],Qe={class:"px-3 py-2"},Pe=["title"],Je={class:"px-3 py-2"},Ke=["title"],We={class:"px-3 py-2"},Xe=["title"],Ye={class:"px-3 py-2 text-muted-foreground"},Ze={key:0},F="inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] font-medium leading-4",ct=G({__name:"Requests",props:{requests:{},isAdmin:{type:Boolean}},setup(m){const n=m,y=v(()=>n.isAdmin?"Requests":"My Requests"),j=v(()=>[{title:"Dashboard",href:W().url},{title:y.value,href:"/requests"}]),h=Q(""),g=o=>(o??"").toLowerCase(),p={emerald:"border-emerald-500/30 bg-emerald-500/10 text-emerald-700 dark:text-emerald-300",blue:"border-blue-500/30 bg-blue-500/10 text-blue-700 dark:text-blue-300",amber:"border-amber-500/30 bg-amber-500/10 text-amber-700 dark:text-amber-300",purple:"border-purple-500/30 bg-purple-500/10 text-purple-700 dark:text-purple-300",slate:"border-slate-500/20 bg-slate-500/10 text-slate-600 dark:text-slate-300"},H=o=>{const s=g(o);return s.includes("password")?p.blue:s.includes("repair")?p.amber:s.includes("system")?p.purple:p.slate},E=o=>{const s=g(o);return s.includes("deliver")?p.blue:s.includes("interview")?p.purple:s.includes("remote")?p.emerald:s.includes("pick")?p.amber:p.slate},_=o=>{if(!o)return"—";const s=new Date(o);return Number.isNaN(s.getTime())?o:new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric"}).format(s)},a=(o,s="—")=>o&&o.trim().length>0?o:s,i=(o,s="Not set")=>o&&o.trim().length>0?o:s,L=["system account creation","system modification","password reset or account recovery (gov mail)","system error / bug report","request for new system module or enhancement","system development"],$=["software license or activation request","computer repair","laptop repair","printer repair","cctv issue/repair","end-user equipment installation, setup, and configuration (connection of computers, monitors, printers, peripherals, and workstation relocation)","request for new it equipment (e.g., pc, printer, ups)","install/reformat operating system","installation of application software","network connectivity installation, repair, and maintenance services (lan and fiber optic cabling, network and wireless setup, repairs, upgrades, and network equipment deployment)","end-user devices component replacement","assess extent of hardware/software failure","system reinstallation/troubleshooting (toims, gaams, ecpac)","inspect unit","borrow unit","data recovery"],I=o=>{const s=g(o);return L.some(t=>s===t)},M=o=>{const s=g(o);return $.some(t=>s===t)},N=o=>I(o.natureOfRequest)?`/requests/${o.id}/it-governance`:M(o.natureOfRequest)?`/requests/${o.id}/equipment-and-network`:o.showUrl,f=v(()=>{const o=g(h.value.trim());return o?n.isAdmin?n.requests.filter(s=>[s.controlTicketNumber,s.requestedBy].filter(Boolean).join(" ").toLowerCase().includes(o)):n.requests.filter(s=>[s.controlTicketNumber,s.natureOfRequest,s.office,s.requestedBy,s.assignedStaff,s.category,s.remarks,s.status,s.estimatedCompletionDate,_(s.dateFiled)].filter(Boolean).join(" ").toLowerCase().includes(o)):n.requests});return(o,s)=>(l(),d(B,null,[x(c(P),{title:y.value},null,8,["title"]),x(K,{breadcrumbs:j.value},{default:R(()=>[n.isAdmin?(l(),d("div",X,[e("div",Y,[e("label",Z,[s[2]||(s[2]=e("span",{class:"sr-only"},"Search Request Here",-1)),T(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>h.value=t),type:"search",placeholder:"Search Request Here",class:"h-9 w-full rounded-md border border-input bg-background px-3 pr-9 text-xs text-foreground shadow-sm transition placeholder:text-muted-foreground focus:border-ring focus:outline-none focus:ring-2 focus:ring-ring/50"},null,512),[[C,h.value]]),x(k,{name:"search",class:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground"})]),e("p",q," Showing "+r(f.value.length)+" of "+r(n.requests.length)+" requests ",1)]),e("div",ee,[e("div",te,[e("table",se,[s[4]||(s[4]=e("thead",{class:"border-b border-border bg-muted/50 text-[11px] uppercase text-foreground dark:border-white/10 dark:bg-white/5"},[e("tr",null,[e("th",{colspan:"10",class:"px-3 py-2 text-center text-xs font-semibold"}," REQUEST FORM ")]),e("tr",{class:"border-t border-border dark:border-white/10"},[e("th",{class:"px-3 py-2 text-left font-semibold"},"Control Ticket No."),e("th",{class:"px-3 py-2 text-left font-semibold"},"Requested By"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Position/Designation"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Office"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Date Filed"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Nature of Request"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Request Description"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Status"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Category"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Action")])],-1)),e("tbody",oe,[(l(!0),d(B,null,D(f.value,t=>(l(),d("tr",{key:t.id,class:"odd:bg-background even:bg-muted/20 hover:bg-muted/40 dark:even:bg-white/5 dark:hover:bg-white/10"},[e("td",re,r(t.controlTicketNumber),1),e("td",ne,[e("span",{class:"block max-w-[140px] truncate",title:a(t.requestedBy)},r(a(t.requestedBy)),9,ae)]),e("td",le,[e("span",{class:"block max-w-[140px] truncate",title:a(t.positionTitle)},r(a(t.positionTitle)),9,ie)]),e("td",de,[e("span",{class:"block max-w-[140px] truncate",title:a(t.office)},r(a(t.office)),9,ce)]),e("td",pe,r(_(t.dateFiled)),1),e("td",ue,[e("span",{class:"block max-w-[160px] truncate",title:a(t.natureOfRequest)},r(a(t.natureOfRequest,"Unspecified")),9,me)]),e("td",fe,[e("span",{class:"block max-w-[220px] truncate",title:a(t.requestDescription)},r(a(t.requestDescription)),9,xe)]),e("td",be,[e("span",{class:b([c(w),c(z)(t.status)]),title:i(t.status)},r(i(t.status)),11,he)]),e("td",ge,[e("span",{class:b([c(w),c(A)(t.category)]),title:i(t.category)},r(i(t.category)),11,ye)]),e("td",_e,[N(t)?(l(),O(c(U),{key:0,href:N(t)||"",class:"inline-flex h-6 w-6 items-center justify-center rounded border border-border text-primary transition hover:bg-muted focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-ring dark:border-white/20 dark:hover:bg-white/10",title:"View request"},{default:R(()=>[x(k,{name:"moreHorizontal",class:"h-3.5 w-3.5"})]),_:1},8,["href"])):(l(),d("span",ke,[x(k,{name:"moreHorizontal",class:"h-3.5 w-3.5"})]))])]))),128)),f.value.length===0?(l(),d("tr",we,[...s[3]||(s[3]=[e("td",{colspan:"10",class:"px-4 py-10 text-center text-xs text-muted-foreground"}," No requests match your search yet. ",-1)])])):S("",!0)])])])])])):(l(),d("div",ve,[e("div",Re,[e("div",null,[e("p",Be,r(y.value),1),e("h1",Ne,r(y.value),1),s[5]||(s[5]=e("p",{class:"text-sm text-muted-foreground"}," Track incoming service requests in a clean, readable list. ",-1))]),e("div",Te,[e("label",Ce,[s[6]||(s[6]=e("span",{class:"sr-only"},"Search Request Here",-1)),T(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>h.value=t),type:"search",placeholder:"Search Request Here",class:"h-9 w-full rounded-full border border-sidebar-border/70 bg-background px-4 pr-10 text-sm text-foreground shadow-sm transition focus:border-primary/50 focus:outline-none focus:ring-2 focus:ring-primary/15"},null,512),[[C,h.value]]),x(k,{name:"search",class:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground"})]),e("p",Se," Showing "+r(f.value.length)+" of "+r(n.requests.length)+" requests ",1)])]),e("div",De,[e("div",Oe,[e("table",Ue,[s[8]||(s[8]=e("thead",{class:"sticky top-0 z-10 border-b border-sidebar-border/70 bg-background/95 text-xs uppercase tracking-wide text-muted-foreground backdrop-blur"},[e("tr",null,[e("th",{class:"px-3 py-3 text-left font-semibold"}," Control Ticket No. "),e("th",{class:"px-3 py-3 text-left font-semibold"}," Requested By "),e("th",{class:"px-3 py-3 text-left font-semibold"},"Office"),e("th",{class:"px-3 py-3 text-left font-semibold"},"Date Filed"),e("th",{class:"px-3 py-3 text-left font-semibold"}," Nature of Request "),e("th",{class:"px-3 py-3 text-left font-semibold"},"Remarks"),e("th",{class:"px-3 py-3 text-left font-semibold"}," Assigned IT Staff "),e("th",{class:"px-3 py-3 text-left font-semibold"},"Status"),e("th",{class:"px-3 py-3 text-left font-semibold"},"Category"),e("th",{class:"px-3 py-3 text-left font-semibold"}," Est. Completion ")])],-1)),e("tbody",ze,[(l(!0),d(B,null,D(f.value,t=>(l(),d("tr",{key:t.id,class:"odd:bg-muted/15 even:bg-background hover:bg-muted/30"},[e("td",Ae,[t.showUrl?(l(),O(c(U),{key:0,href:t.showUrl,class:"text-primary transition hover:text-primary/80"},{default:R(()=>[J(r(t.controlTicketNumber),1)]),_:2},1032,["href"])):(l(),d("span",Fe,r(t.controlTicketNumber),1))]),e("td",Ve,[e("span",{class:"block max-w-[140px] truncate",title:a(t.requestedBy)},r(a(t.requestedBy)),9,je)]),e("td",He,[e("span",{class:"block max-w-[140px] truncate",title:a(t.office)},r(a(t.office)),9,Ee)]),e("td",Le,r(_(t.dateFiled)),1),e("td",$e,[e("span",{class:b([F,H(t.natureOfRequest)]),title:i(t.natureOfRequest,"Unspecified")},r(i(t.natureOfRequest,"Unspecified")),11,Ie)]),e("td",Me,[e("span",{class:b([F,E(t.remarks)]),title:i(t.remarks)},r(i(t.remarks)),11,Ge)]),e("td",Qe,[e("span",{class:"block max-w-[150px] truncate",title:a(t.assignedStaff)},r(a(t.assignedStaff,"Not assigned")),9,Pe)]),e("td",Je,[e("span",{class:b([c(w),c(z)(t.status)]),title:i(t.status)},r(i(t.status)),11,Ke)]),e("td",We,[e("span",{class:b([c(w),c(A)(t.category)]),title:i(t.category)},r(i(t.category)),11,Xe)]),e("td",Ye,r(_(t.estimatedCompletionDate)),1)]))),128)),f.value.length===0?(l(),d("tr",Ze,[...s[7]||(s[7]=[e("td",{colspan:"10",class:"px-4 py-10 text-center text-sm text-muted-foreground"}," No requests match your search yet. ",-1)])])):S("",!0)])])])])]))]),_:1},8,["breadcrumbs"])],64))}});export{ct as default};
