import{d as E,r as x,f as N,g,c as d,a as v,u as a,h as V,w as j,b as e,j as _,t as l,v as h,k as y,o as n,F as k,n as D,p as U,x as w}from"./app-BKeQIzJd.js";import{_ as B}from"./AppLayout.vue_vue_type_script_setup_true_lang-D4ZJz0Dy.js";import{d as F}from"./lazy-CSzc0j1S.js";const L={class:"flex flex-1 flex-col gap-6 p-6"},I={class:"rounded-3xl border border-sidebar-border/60 bg-background p-6"},M={class:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between"},T={class:"flex flex-wrap items-center gap-3"},z={class:"rounded-full border border-sidebar-border/60 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-muted-foreground"},K={class:"rounded-3xl border border-sidebar-border/60 bg-background p-6"},G={class:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between"},H={class:"text-lg font-semibold"},J={class:"mt-4 grid gap-4 lg:grid-cols-[1fr_auto] lg:items-end"},O={key:0,class:"mt-2 text-xs text-red-500"},P=["disabled"],Q={class:"rounded-3xl border border-sidebar-border/60 bg-background p-6"},W={key:0,class:"mt-6 rounded-2xl border border-dashed border-sidebar-border/70 p-8 text-center text-sm text-muted-foreground"},X={key:1,class:"mt-6 overflow-hidden rounded-2xl border border-sidebar-border/60"},Y={class:"divide-y divide-sidebar-border/60"},Z={class:"font-semibold"},ee={class:"text-xs text-muted-foreground"},te={class:"text-xs text-muted-foreground"},se={class:"flex flex-wrap justify-end gap-2"},re=["onClick"],oe=["onClick"],de=["onClick"],ie=E({__name:"Index",props:{requests:{}},setup(C){const b=C,A=[{title:"Dashboard",href:F().url},{title:"Nature of Request",href:"/admin/nature-of-request"}],m=x(""),i=x(null),o=N({name:"",is_active:!0}),p=g(()=>{const r=m.value.trim().toLowerCase();return r?b.requests.filter(t=>t.name.toLowerCase().includes(r)):b.requests}),u=g(()=>i.value!==null);function c(){i.value=null,o.reset(),o.clearErrors()}function R(r){i.value=r.id,o.name=r.name,o.is_active=r.isActive,o.clearErrors()}function S(){if(u.value&&i.value!==null){o.patch(`/admin/nature-of-request/${i.value}`,{preserveScroll:!0,onSuccess:c});return}o.post("/admin/nature-of-request",{preserveScroll:!0,onSuccess:c})}function q(r){confirm(`Remove "${r.name}" from the list?`)&&w.delete(`/admin/nature-of-request/${r.id}`,{preserveScroll:!0,onSuccess:()=>{i.value===r.id&&c()}})}function $(r){w.patch(`/admin/nature-of-request/${r.id}`,{name:r.name,is_active:!0},{preserveScroll:!0})}return(r,t)=>(n(),d(k,null,[v(a(V),{title:"Nature of Request"}),v(B,{breadcrumbs:A},{default:j(()=>[e("div",L,[e("section",I,[e("div",M,[t[2]||(t[2]=e("div",{class:"space-y-2"},[e("p",{class:"text-xs uppercase tracking-[0.3em] text-muted-foreground"}," Administration "),e("h1",{class:"text-2xl font-semibold"},"Nature of Request"),e("p",{class:"text-sm text-muted-foreground"}," Manage the request types used across service logs and ticket forms. ")],-1)),e("div",T,[e("div",z," Total: "+l(b.requests.length),1),_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>m.value=s),type:"search",placeholder:"Search request types...",class:"h-10 w-64 rounded-full border border-sidebar-border/70 bg-background px-4 text-sm"},null,512),[[h,m.value]])])])]),e("section",K,[e("div",G,[e("div",null,[e("h2",H,l(u.value?"Edit request type":"Add a request type"),1),t[3]||(t[3]=e("p",{class:"text-sm text-muted-foreground"}," Keep labels consistent so existing transactions remain intact. ",-1))]),u.value?(n(),d("button",{key:0,type:"button",class:"rounded-full border border-sidebar-border/70 px-4 py-2 text-xs font-semibold text-muted-foreground transition-colors hover:bg-muted/40",onClick:c}," Cancel editing ")):y("",!0)]),e("div",J,[e("div",null,[t[4]||(t[4]=e("label",{class:"text-xs font-semibold uppercase tracking-[0.2em] text-muted-foreground"}," Request type name ",-1)),_(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>a(o).name=s),type:"text",class:"mt-2 w-full rounded-xl border border-sidebar-border/70 bg-background px-3 py-2 text-sm",placeholder:"Describe the service request"},null,512),[[h,a(o).name]]),a(o).errors.name?(n(),d("p",O,l(a(o).errors.name),1)):y("",!0)]),e("button",{type:"button",class:"h-10 rounded-full bg-[#2563eb] px-6 text-sm font-semibold text-white transition-colors hover:bg-[#1d4ed8] disabled:cursor-not-allowed disabled:opacity-60",disabled:a(o).processing||!a(o).name.trim(),onClick:S},l(u.value?"Save changes":"Add request type"),9,P)])]),e("section",Q,[t[6]||(t[6]=e("h2",{class:"text-lg font-semibold"},"Request types",-1)),p.value.length?(n(),d("div",X,[t[5]||(t[5]=e("div",{class:"hidden grid-cols-[1.6fr_0.5fr_0.5fr_0.7fr] gap-4 border-b border-sidebar-border/60 bg-muted/30 px-4 py-3 text-xs font-semibold uppercase tracking-[0.2em] text-muted-foreground md:grid"},[e("span",null,"Request type"),e("span",null,"Status"),e("span",null,"Usage"),e("span",{class:"text-right"},"Actions")],-1)),e("div",Y,[(n(!0),d(k,null,D(p.value,s=>(n(),d("div",{key:s.id,class:"flex flex-col gap-3 px-4 py-4 text-sm md:grid md:grid-cols-[1.6fr_0.5fr_0.5fr_0.7fr] md:items-center md:gap-4"},[e("div",null,[e("p",Z,l(s.name),1),e("p",ee," Updated "+l(s.updatedAt?s.updatedAt:"â€”"),1)]),e("span",{class:U(["inline-flex w-fit items-center rounded-full px-2 py-1 text-xs font-semibold",s.isActive?"bg-emerald-100 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200":"bg-rose-100 text-rose-700 dark:bg-rose-500/20 dark:text-rose-200"])},l(s.isActive?"Active":"Removed"),3),e("span",te,l(s.usageCount)+" linked ",1),e("div",se,[e("button",{type:"button",class:"rounded-full border border-sidebar-border/70 px-3 py-1.5 text-xs font-semibold text-muted-foreground transition-colors hover:bg-muted/40",onClick:f=>R(s)}," Edit ",8,re),s.isActive?(n(),d("button",{key:0,type:"button",class:"rounded-full border border-rose-200 px-3 py-1.5 text-xs font-semibold text-rose-600 transition-colors hover:bg-rose-50 dark:border-rose-500/40 dark:hover:bg-rose-500/10",onClick:f=>q(s)}," Remove ",8,oe)):(n(),d("button",{key:1,type:"button",class:"rounded-full border border-sidebar-border/70 px-3 py-1.5 text-xs font-semibold text-muted-foreground transition-colors hover:bg-muted/40",onClick:f=>$(s)}," Restore ",8,de))])]))),128))])])):(n(),d("div",W," No request types match this search. "))])])]),_:1})],64))}});export{ie as default};
