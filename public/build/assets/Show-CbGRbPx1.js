import{d as N,u as v,a as l,b as t,e as s,h as A,w as r,f as o,t as p,p as C,g as w,k as a,i as $,o as u,F as V,n as U,E as D,j as B,B as E,l as L}from"./app-DjKwfWyu.js";import{_ as k}from"./HeadingSmall.vue_vue_type_script_setup_true_lang-6e3qusa3.js";import{_ as f,a as c,b as g}from"./Label.vue_vue_type_script_setup_true_lang-CZsl-4h0.js";import{a as y,_ as M}from"./AppLayout.vue_vue_type_script_setup_true_lang-CGMNLiAn.js";import{d as P}from"./index-CSzc0j1S.js";const O={class:"flex flex-1 flex-col gap-6 p-6"},j={class:"rounded-3xl border border-sidebar-border/60 bg-background p-6"},R={class:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between"},W={class:"mt-2 text-2xl font-semibold"},z={class:"text-sm text-muted-foreground"},I={class:"text-xs text-muted-foreground"},T={class:"flex flex-wrap gap-2"},q={class:"inline-flex items-center rounded-full bg-muted px-3 py-1 text-xs font-semibold text-foreground"},G={class:"grid gap-6 lg:grid-cols-[1.1fr_0.9fr]"},H={class:"space-y-6"},J={class:"rounded-3xl border border-sidebar-border/60 bg-background p-6"},K={class:"grid gap-2"},Q={class:"grid gap-2"},X={class:"grid gap-2"},Y={class:"rounded-3xl border border-sidebar-border/60 bg-background p-6"},Z={class:"grid gap-2"},ee=["value"],se={class:"grid gap-2"},oe={class:"flex items-center gap-3"},te={key:0,class:"text-sm text-emerald-600"},ie={class:"rounded-3xl border border-sidebar-border/60 bg-background p-6"},de={class:"grid gap-2"},re=["value"],ae={class:"flex items-center gap-3 text-sm"},ne={class:"space-y-6"},le={class:"rounded-3xl border border-sidebar-border/60 bg-background p-6"},ue={class:"grid gap-2"},me={class:"grid gap-2"},pe={class:"rounded-3xl border border-sidebar-border/60 bg-background p-6"},fe={key:0,class:"mt-4 text-sm text-muted-foreground"},ge={key:1,class:"mt-4 space-y-3 text-sm"},be={class:"font-semibold text-foreground"},ce={class:"mt-1"},Ve=N({__name:"Show",props:{user:{},officeDesignation:{},officeDesignations:{},roleOptions:{},auditLogs:{}},setup(F){const d=F,h=[{title:"Dashboard",href:P().url},{title:"User management",href:"/admin/users"},{title:d.user.name,href:`/admin/users/${d.user.id}`}],n=v({name:d.user.name,email:d.user.email,phone:d.user.phone??""}),m=v({office_designation_id:d.user.office_designation_id??d.officeDesignation?.id??null,position_title:d.user.position_title??""}),_=v({role:d.user.role}),x=v({is_active:d.user.is_active}),b=v({password:"",password_confirmation:""});return(_e,e)=>(u(),l(V,null,[t(s(A),{title:`Manage ${d.user.name}`},null,8,["title"]),t(M,{breadcrumbs:h},{default:r(()=>[o("div",O,[o("section",j,[o("div",R,[o("div",null,[e[14]||(e[14]=o("p",{class:"text-xs uppercase tracking-[0.3em] text-muted-foreground"}," User management ",-1)),o("h1",W,p(d.user.name),1),o("p",z,p(d.user.email),1),o("p",I," 2FA: "+p(d.user.two_factor_enabled?"Enabled":"Disabled"),1)]),o("div",T,[o("span",{class:C(["inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold",d.user.is_active?"bg-emerald-100 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200":"bg-rose-100 text-rose-700 dark:bg-rose-500/20 dark:text-rose-200"])},p(d.user.is_active?"Active":"Inactive"),3),o("span",q,p(d.roleOptions[d.user.role]||d.user.role),1)])])]),o("section",G,[o("div",H,[o("div",J,[t(k,{title:"Profile details",description:"Update name, email, and contact information."}),o("form",{onSubmit:e[3]||(e[3]=w(i=>s(n).patch(`/admin/users/${d.user.id}`),["prevent"])),class:"mt-6 space-y-6"},[o("div",K,[t(s(f),{for:"name"},{default:r(()=>[...e[15]||(e[15]=[a("Name",-1)])]),_:1}),t(s(c),{id:"name",modelValue:s(n).name,"onUpdate:modelValue":e[0]||(e[0]=i=>s(n).name=i)},null,8,["modelValue"]),t(g,{message:s(n).errors.name},null,8,["message"])]),o("div",Q,[t(s(f),{for:"email"},{default:r(()=>[...e[16]||(e[16]=[a("Email",-1)])]),_:1}),t(s(c),{id:"email",type:"email",modelValue:s(n).email,"onUpdate:modelValue":e[1]||(e[1]=i=>s(n).email=i)},null,8,["modelValue"]),t(g,{message:s(n).errors.email},null,8,["message"])]),o("div",X,[t(s(f),{for:"phone"},{default:r(()=>[...e[17]||(e[17]=[a("Phone",-1)])]),_:1}),t(s(c),{id:"phone",modelValue:s(n).phone,"onUpdate:modelValue":e[2]||(e[2]=i=>s(n).phone=i)},null,8,["modelValue"]),t(g,{message:s(n).errors.phone},null,8,["message"])]),t(s(y),{disabled:s(n).processing},{default:r(()=>[...e[18]||(e[18]=[a(" Save profile ",-1)])]),_:1},8,["disabled"])],32)]),o("div",Y,[t(k,{title:"Work details",description:"Update designated office and position."}),o("form",{onSubmit:e[6]||(e[6]=w(i=>s(m).patch(`/admin/users/${d.user.id}`),["prevent"])),class:"mt-6 space-y-6"},[o("div",Z,[t(s(f),{for:"office_designation_id"},{default:r(()=>[...e[19]||(e[19]=[a("Designated office",-1)])]),_:1}),$(o("select",{id:"office_designation_id","onUpdate:modelValue":e[4]||(e[4]=i=>s(m).office_designation_id=i),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[e[20]||(e[20]=o("option",{value:null,disabled:""},"Select an office",-1)),(u(!0),l(V,null,U(d.officeDesignations,i=>(u(),l("option",{key:i.id,value:i.id},p(i.name),9,ee))),128))],512),[[D,s(m).office_designation_id,void 0,{number:!0}]]),t(g,{message:s(m).errors.office_designation_id},null,8,["message"])]),o("div",se,[t(s(f),{for:"position_title"},{default:r(()=>[...e[21]||(e[21]=[a("Position / Designation",-1)])]),_:1}),t(s(c),{id:"position_title",modelValue:s(m).position_title,"onUpdate:modelValue":e[5]||(e[5]=i=>s(m).position_title=i)},null,8,["modelValue"]),t(g,{message:s(m).errors.position_title},null,8,["message"])]),o("div",oe,[t(s(y),{disabled:s(m).processing},{default:r(()=>[...e[22]||(e[22]=[a(" Save work details ",-1)])]),_:1},8,["disabled"]),s(m).recentlySuccessful?(u(),l("p",te," Work details saved. ")):B("",!0)])],32)]),o("div",ie,[t(k,{title:"Access controls",description:"Assign roles and update account status."}),o("form",{onSubmit:e[8]||(e[8]=w(i=>s(_).patch(`/admin/users/${d.user.id}/role`),["prevent"])),class:"mt-6 space-y-4"},[o("div",de,[t(s(f),{for:"role"},{default:r(()=>[...e[23]||(e[23]=[a("Role",-1)])]),_:1}),$(o("select",{id:"role","onUpdate:modelValue":e[7]||(e[7]=i=>s(_).role=i),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[(u(!0),l(V,null,U(d.roleOptions,(i,S)=>(u(),l("option",{key:S,value:S},p(i),9,re))),128))],512),[[D,s(_).role]]),t(g,{message:s(_).errors.role},null,8,["message"])]),t(s(y),{disabled:s(_).processing},{default:r(()=>[...e[24]||(e[24]=[a(" Update role ",-1)])]),_:1},8,["disabled"])],32),o("form",{onSubmit:e[10]||(e[10]=w(i=>s(x).patch(`/admin/users/${d.user.id}/status`),["prevent"])),class:"mt-6 space-y-4"},[o("div",ae,[$(o("input",{id:"is_active",type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=i=>s(x).is_active=i),class:"h-4 w-4 rounded border-slate-600 text-sky-500"},null,512),[[E,s(x).is_active]]),t(s(f),{for:"is_active"},{default:r(()=>[...e[25]||(e[25]=[a("Account active",-1)])]),_:1})]),t(g,{message:s(x).errors.is_active},null,8,["message"]),t(s(y),{variant:"secondary",disabled:s(x).processing},{default:r(()=>[...e[26]||(e[26]=[a(" Update status ",-1)])]),_:1},8,["disabled"])],32)])]),o("div",ne,[o("div",le,[t(k,{title:"Password reset",description:"Set a new password for this account."}),o("form",{onSubmit:e[13]||(e[13]=w(i=>s(b).patch(`/admin/users/${d.user.id}/password`),["prevent"])),class:"mt-6 space-y-4"},[o("div",ue,[t(s(f),{for:"password"},{default:r(()=>[...e[27]||(e[27]=[a("New password",-1)])]),_:1}),t(s(c),{id:"password",type:"password",modelValue:s(b).password,"onUpdate:modelValue":e[11]||(e[11]=i=>s(b).password=i)},null,8,["modelValue"]),t(g,{message:s(b).errors.password},null,8,["message"])]),o("div",me,[t(s(f),{for:"password_confirmation"},{default:r(()=>[...e[28]||(e[28]=[a("Confirm password",-1)])]),_:1}),t(s(c),{id:"password_confirmation",type:"password",modelValue:s(b).password_confirmation,"onUpdate:modelValue":e[12]||(e[12]=i=>s(b).password_confirmation=i)},null,8,["modelValue"])]),t(s(y),{variant:"secondary",disabled:s(b).processing},{default:r(()=>[...e[29]||(e[29]=[a(" Update password ",-1)])]),_:1},8,["disabled"])],32)]),o("div",pe,[t(k,{title:"Audit trail",description:"Recent actions taken for this account."}),d.auditLogs.length?(u(),l("div",ge,[(u(!0),l(V,null,U(d.auditLogs,i=>(u(),l("div",{key:i.id,class:"rounded-xl border border-sidebar-border/60 px-4 py-3 text-xs text-muted-foreground"},[o("p",be,p(i.action),1),o("p",ce,p(i.created_at),1)]))),128))])):(u(),l("div",fe," No audit activity recorded yet. ")),t(s(L),{href:"/admin/audit-logs",class:"mt-4 inline-flex text-xs font-semibold uppercase tracking-[0.2em] text-muted-foreground hover:text-foreground"},{default:r(()=>[...e[30]||(e[30]=[a(" View full audit log ",-1)])]),_:1})])])])])]),_:1})],64))}});export{Ve as default};
