import{d as I,g as R,r as P,c as i,a as p,u as l,h as q,w as b,o as a,b as e,l as _,e as C,j as A,v as S,t as r,k as D,F as B,n as U,p as m,m as O}from"./app-BbDXI_Od.js";import{_ as f}from"./Icon.vue_vue_type_script_setup_true_lang-Dhso_EX_.js";import{_ as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-D1uJhlkX.js";import{r as y,g as F,a as V}from"./requestBadges-UCv4_yyd.js";import{d as J}from"./lazy-CSzc0j1S.js";import"./upload-MJX2utxv.js";import"./trash-2-Dvl-OmRL.js";import"./camera-B7HD2y34.js";import"./check-Bvjw97VO.js";import"./image-VKKv4er0.js";import"./sun-DKM394Go.js";import"./user-plus-C99eKk_D.js";const K={key:0,class:"flex flex-1 flex-col bg-background p-5 sm:p-6"},W={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},X={class:"relative w-full max-w-xs"},Y={class:"mt-1 text-[11px] text-muted-foreground"},Z={class:"mt-3 rounded-md border border-border bg-card shadow-sm dark:border-white/10"},ee={class:"max-h-[560px] overflow-auto"},te={class:"w-full min-w-[980px] text-[11px] text-foreground"},se={class:"divide-y divide-border text-xs text-foreground dark:divide-white/10"},oe={class:"px-3 py-2 font-medium"},re={class:"px-3 py-2"},ae=["title"],ne={class:"px-3 py-2"},ie=["title"],le={class:"px-3 py-2"},de=["title"],ce={class:"px-3 py-2 text-muted-foreground"},pe={class:"px-3 py-2"},ue=["title"],me={class:"px-3 py-2"},fe=["title"],xe={class:"px-3 py-2"},be=["title"],he={class:"px-3 py-2"},ge=["title"],_e={class:"px-3 py-2 text-muted-foreground"},ye=["title"],ke={key:1,class:"text-[11px]"},we={class:"px-3 py-2"},ve={key:1,class:"inline-flex h-6 w-6 items-center justify-center rounded border border-border text-muted-foreground dark:border-white/20"},Ne={key:0},Re={key:1,class:"flex flex-1 flex-col gap-5 p-6"},Ce={class:"flex flex-col gap-3"},Be={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},Te={class:"text-xs uppercase tracking-[0.2em] text-muted-foreground"},Ae={class:"text-xl font-semibold text-foreground"},Se={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},De={class:"relative w-full sm:max-w-sm"},Ue={class:"text-xs text-muted-foreground"},Oe={class:"rounded-2xl border border-sidebar-border/60 bg-background shadow-sm"},Fe={class:"max-h-[560px] overflow-auto"},Ve={class:"w-full min-w-[1200px] text-sm"},je={class:"divide-y divide-muted/40 text-sm text-foreground"},Qe={class:"px-3 py-2 font-medium"},ze={key:1},He={class:"px-3 py-2"},Ee=["title"],Le={class:"px-3 py-2"},Me=["title"],$e={class:"px-3 py-2 text-muted-foreground"},Ie={class:"px-3 py-2"},Pe=["title"],qe={class:"px-3 py-2"},Ge=["title"],Je={class:"px-3 py-2"},Ke=["title"],We={class:"px-3 py-2"},Xe=["title"],Ye={class:"px-3 py-2"},Ze=["title"],et={class:"px-3 py-2 text-muted-foreground"},tt=["title"],st={key:1,class:"text-xs"},ot={class:"px-3 py-2 text-muted-foreground"},rt={key:0},j="inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] font-medium leading-4",ht=I({__name:"Archive",props:{requests:{},isAdmin:{type:Boolean}},setup(Q){const c=Q,k=R(()=>c.isAdmin?"Archived Requests":"My Archived Requests"),z=R(()=>[{title:"Dashboard",href:J().url},{title:c.isAdmin?"Requests":"My Requests",href:"/requests"},{title:"Archive",href:"/requests/archive"}]),x=P(""),h=o=>(o??"").toLowerCase(),H=o=>{const s=h(o),t="border-blue-500/30 bg-blue-500/10 text-blue-700 dark:text-blue-300",w="border-amber-500/30 bg-amber-500/10 text-amber-700 dark:text-amber-300",v="border-purple-500/30 bg-purple-500/10 text-purple-700 dark:text-purple-300",N="border-slate-500/20 bg-slate-500/10 text-slate-600 dark:text-slate-300";return s.includes("password")?t:s.includes("repair")?w:s.includes("system")?v:N},E=o=>{const s=h(o),t="border-blue-500/30 bg-blue-500/10 text-blue-700 dark:text-blue-300",w="border-purple-500/30 bg-purple-500/10 text-purple-700 dark:text-purple-300",v="border-emerald-500/30 bg-emerald-500/10 text-emerald-700 dark:text-emerald-300",N="border-amber-500/30 bg-amber-500/10 text-amber-700 dark:text-amber-300",$="border-slate-500/20 bg-slate-500/10 text-slate-600 dark:text-slate-300";return s.includes("deliver")?t:s.includes("interview")?w:s.includes("remote")?v:s.includes("pick")?N:$},g=o=>{if(!o)return"—";const s=new Date(o);return Number.isNaN(s.getTime())?o:new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric"}).format(s)},n=(o,s="—")=>o&&o.trim().length>0?o:s,d=(o,s="Not set")=>o&&o.trim().length>0?o:s,L=["software license or activation request","computer repair","laptop repair","printer repair","cctv issue/repair","end-user equipment installation, setup, and configuration (connection of computers, monitors, printers, peripherals, and workstation relocation)","request for new it equipment (e.g., pc, printer, ups)","install/reformat operating system","installation of application software","network connectivity installation, repair, and maintenance services (lan and fiber optic cabling, network and wireless setup, repairs, upgrades, and network equipment deployment)","end-user devices component replacement","assess extent of hardware/software failure","system reinstallation/troubleshooting (toims, gaams, ecpac)","inspect unit","borrow unit","data recovery"],M=o=>{const s=h(o);return L.some(t=>s===t)},T=o=>c.isAdmin&&M(o.natureOfRequest)?`/requests/${o.id}/equipment-and-network`:c.isAdmin?`/requests/${o.id}`:o.showUrl,u=R(()=>{const o=h(x.value.trim());return o?c.isAdmin?c.requests.filter(s=>[s.controlTicketNumber,s.requestedBy].filter(Boolean).join(" ").toLowerCase().includes(o)):c.requests.filter(s=>[s.controlTicketNumber,s.natureOfRequest,s.office,s.requestedBy,s.assignedStaff,s.category,s.remarks,s.status,s.estimatedCompletionDate,g(s.dateFiled)].filter(Boolean).join(" ").toLowerCase().includes(o)):c.requests});return(o,s)=>(a(),i(B,null,[p(l(q),{title:k.value},null,8,["title"]),p(G,{breadcrumbs:z.value},{default:b(()=>[c.isAdmin?(a(),i("div",K,[e("div",W,[p(l(_),{href:"/requests",class:"inline-flex w-fit items-center gap-1.5 text-xs text-muted-foreground transition hover:text-foreground"},{default:b(()=>[p(f,{name:"arrowLeft",class:"h-3.5 w-3.5"}),s[2]||(s[2]=C(" Back to active requests ",-1))]),_:1}),e("label",X,[s[3]||(s[3]=e("span",{class:"sr-only"},"Search Request Here",-1)),A(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>x.value=t),type:"search",placeholder:"Search Request Here",class:"h-9 w-full rounded-md border border-input bg-background px-3 pr-9 text-xs text-foreground shadow-sm transition placeholder:text-muted-foreground focus:border-ring focus:outline-none focus:ring-2 focus:ring-ring/50"},null,512),[[S,x.value]]),p(f,{name:"search",class:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground"})])]),e("p",Y," Showing "+r(u.value.length)+" of "+r(c.requests.length)+" archived requests ",1),e("div",Z,[e("div",ee,[e("table",te,[s[5]||(s[5]=e("thead",{class:"border-b border-border bg-muted/50 text-[11px] uppercase text-foreground dark:border-white/10 dark:bg-white/5"},[e("tr",null,[e("th",{colspan:"11",class:"px-3 py-2 text-center text-xs font-semibold"}," ARCHIVED REQUEST FORM ")]),e("tr",{class:"border-t border-border dark:border-white/10"},[e("th",{class:"px-3 py-2 text-left font-semibold"},"Control Ticket No."),e("th",{class:"px-3 py-2 text-left font-semibold"},"Requested By"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Position/Designation"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Office"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Date Filed"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Nature of Request"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Request Description"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Status"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Category"),e("th",{class:"px-3 py-2 text-left font-semibold"},"QR Code"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Action")])],-1)),e("tbody",se,[(a(!0),i(B,null,U(u.value,t=>(a(),i("tr",{key:t.id,class:"odd:bg-background even:bg-muted/20 hover:bg-muted/40 dark:even:bg-white/5 dark:hover:bg-white/10"},[e("td",oe,r(t.controlTicketNumber),1),e("td",re,[e("span",{class:"block max-w-[140px] truncate",title:n(t.requestedBy)},r(n(t.requestedBy)),9,ae)]),e("td",ne,[e("span",{class:"block max-w-[140px] truncate",title:n(t.positionTitle)},r(n(t.positionTitle)),9,ie)]),e("td",le,[e("span",{class:"block max-w-[140px] truncate",title:n(t.office)},r(n(t.office)),9,de)]),e("td",ce,r(g(t.dateFiled)),1),e("td",pe,[e("span",{class:"block max-w-[160px] truncate",title:n(t.natureOfRequest)},r(n(t.natureOfRequest,"Unspecified")),9,ue)]),e("td",me,[e("span",{class:"block max-w-[220px] truncate",title:n(t.requestDescription)},r(n(t.requestDescription)),9,fe)]),e("td",xe,[e("span",{class:m([l(y),l(F)(t.status)]),title:d(t.status)},r(d(t.status)),11,be)]),e("td",he,[e("span",{class:m([l(y),l(V)(t.category)]),title:d(t.category)},r(d(t.category)),11,ge)]),e("td",_e,[t.hasQrCode&&t.qrCodeNumber?(a(),i("span",{key:0,class:"font-mono text-[11px]",title:t.qrCodeNumber},r(t.qrCodeNumber),9,ye)):(a(),i("span",ke,"No QR code"))]),e("td",we,[T(t)?(a(),O(l(_),{key:0,href:T(t)||"",class:"inline-flex h-6 w-6 items-center justify-center rounded border border-border text-primary transition hover:bg-muted focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-ring dark:border-white/20 dark:hover:bg-white/10",title:"View request"},{default:b(()=>[p(f,{name:"moreHorizontal",class:"h-3.5 w-3.5"})]),_:1},8,["href"])):(a(),i("span",ve,[p(f,{name:"moreHorizontal",class:"h-3.5 w-3.5"})]))])]))),128)),u.value.length===0?(a(),i("tr",Ne,[...s[4]||(s[4]=[e("td",{colspan:"11",class:"px-4 py-10 text-center text-xs text-muted-foreground"}," No archived requests match your search. ",-1)])])):D("",!0)])])])])])):(a(),i("div",Re,[e("div",Ce,[e("div",Be,[e("div",null,[e("p",Te,r(k.value),1),e("h1",Ae,r(k.value),1),s[6]||(s[6]=e("p",{class:"text-sm text-muted-foreground"}," Completed requests are archived here for review. ",-1))]),p(l(_),{href:"/requests",class:"inline-flex w-fit items-center gap-1.5 text-sm text-muted-foreground transition hover:text-foreground"},{default:b(()=>[p(f,{name:"arrowLeft",class:"h-4 w-4"}),s[7]||(s[7]=C(" Back to active requests ",-1))]),_:1})]),e("div",Se,[e("label",De,[s[8]||(s[8]=e("span",{class:"sr-only"},"Search Request Here",-1)),A(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>x.value=t),type:"search",placeholder:"Search Request Here",class:"h-9 w-full rounded-full border border-sidebar-border/70 bg-background px-4 pr-10 text-sm text-foreground shadow-sm transition focus:border-primary/50 focus:outline-none focus:ring-2 focus:ring-primary/15"},null,512),[[S,x.value]]),p(f,{name:"search",class:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground"})]),e("p",Ue," Showing "+r(u.value.length)+" of "+r(c.requests.length)+" archived requests ",1)])]),e("div",Oe,[e("div",Fe,[e("table",Ve,[s[10]||(s[10]=e("thead",{class:"sticky top-0 z-10 border-b border-sidebar-border/70 bg-background/95 text-xs uppercase tracking-wide text-muted-foreground backdrop-blur"},[e("tr",null,[e("th",{class:"px-3 py-3 text-left font-semibold"},"Control Ticket No."),e("th",{class:"px-3 py-3 text-left font-semibold"},"Requested By"),e("th",{class:"px-3 py-3 text-left font-semibold"},"Office"),e("th",{class:"px-3 py-3 text-left font-semibold"},"Date Filed"),e("th",{class:"px-3 py-3 text-left font-semibold"},"Nature of Request"),e("th",{class:"px-3 py-3 text-left font-semibold"},"Remarks"),e("th",{class:"px-3 py-3 text-left font-semibold"},"Assigned IT Staff"),e("th",{class:"px-3 py-3 text-left font-semibold"},"Status"),e("th",{class:"px-3 py-3 text-left font-semibold"},"Category"),e("th",{class:"px-3 py-3 text-left font-semibold"},"QR Code"),e("th",{class:"px-3 py-3 text-left font-semibold"},"Est. Completion")])],-1)),e("tbody",je,[(a(!0),i(B,null,U(u.value,t=>(a(),i("tr",{key:t.id,class:"odd:bg-muted/15 even:bg-background hover:bg-muted/30"},[e("td",Qe,[t.showUrl?(a(),O(l(_),{key:0,href:t.showUrl,class:"text-primary transition hover:text-primary/80"},{default:b(()=>[C(r(t.controlTicketNumber),1)]),_:2},1032,["href"])):(a(),i("span",ze,r(t.controlTicketNumber),1))]),e("td",He,[e("span",{class:"block max-w-[140px] truncate",title:n(t.requestedBy)},r(n(t.requestedBy)),9,Ee)]),e("td",Le,[e("span",{class:"block max-w-[140px] truncate",title:n(t.office)},r(n(t.office)),9,Me)]),e("td",$e,r(g(t.dateFiled)),1),e("td",Ie,[e("span",{class:m([j,H(t.natureOfRequest)]),title:d(t.natureOfRequest,"Unspecified")},r(d(t.natureOfRequest,"Unspecified")),11,Pe)]),e("td",qe,[e("span",{class:m([j,E(t.remarks)]),title:d(t.remarks)},r(d(t.remarks)),11,Ge)]),e("td",Je,[e("span",{class:"block max-w-[150px] truncate",title:n(t.assignedStaff)},r(n(t.assignedStaff,"Not assigned")),9,Ke)]),e("td",We,[e("span",{class:m([l(y),l(F)(t.status)]),title:d(t.status)},r(d(t.status)),11,Xe)]),e("td",Ye,[e("span",{class:m([l(y),l(V)(t.category)]),title:d(t.category)},r(d(t.category)),11,Ze)]),e("td",et,[t.hasQrCode&&t.qrCodeNumber?(a(),i("span",{key:0,class:"font-mono text-xs",title:t.qrCodeNumber},r(t.qrCodeNumber),9,tt)):(a(),i("span",st,"No QR code"))]),e("td",ot,r(g(t.estimatedCompletionDate)),1)]))),128)),u.value.length===0?(a(),i("tr",rt,[...s[9]||(s[9]=[e("td",{colspan:"11",class:"px-4 py-10 text-center text-sm text-muted-foreground"}," No archived requests match your search. ",-1)])])):D("",!0)])])])])]))]),_:1},8,["breadcrumbs"])],64))}});export{ht as default};
