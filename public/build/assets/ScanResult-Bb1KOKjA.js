import{d as C,g as f,f as v,c as d,a as b,u as n,h as D,w as x,b as e,k as l,o as r,t as o,e as i,m as M,p as T,l as A,j as q,v as $,F as p,n as h,q as B}from"./app-BKeQIzJd.js";import{d as U,h as F,_ as V}from"./AppLayout.vue_vue_type_script_setup_true_lang-D4ZJz0Dy.js";import{d as E}from"./lazy-CSzc0j1S.js";import{U as O}from"./user-plus-COduW6wu.js";const P={class:"flex flex-1 flex-col gap-6 p-6"},j={class:"rounded-3xl border border-sidebar-border/60 bg-background p-6"},L={key:0,class:"mb-4 rounded-lg border border-amber-500/30 bg-amber-500/10 px-4 py-3 text-sm text-amber-700 dark:text-amber-200"},W={class:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between"},z={class:"space-y-2"},Y={class:"text-2xl font-semibold"},G={class:"text-sm text-muted-foreground"},J={key:0},K={key:1},Q={class:"flex flex-wrap gap-3"},X={key:0,class:"inline-flex items-center gap-1 rounded-full bg-blue-100 px-3 py-1 text-xs font-semibold text-blue-700 dark:bg-blue-500/20 dark:text-blue-200"},Z={key:0,class:"grid gap-4 lg:grid-cols-2"},_={class:"rounded-2xl border border-sidebar-border/60 bg-background p-6"},ee={key:0,class:"mt-4 space-y-3"},te=["disabled"],se={key:0,class:"text-sm text-red-500"},oe={key:1,class:"text-sm text-red-500"},re={key:1,class:"mt-4 text-sm text-muted-foreground"},de={class:"mt-6 rounded-xl bg-muted/40 px-4 py-3 text-sm text-muted-foreground"},ie={class:"font-semibold text-foreground"},ne={key:0,class:"mt-1"},ae={class:"rounded-2xl border border-sidebar-border/60 bg-background p-6"},le={key:0,class:"mt-4 space-y-3"},me={class:"relative"},ue=["value"],ce=["disabled"],be={key:0,class:"text-sm text-red-500"},ge={key:1,class:"mt-4 text-sm text-muted-foreground"},fe={class:"mt-6 rounded-xl bg-muted/40 px-4 py-3 text-sm text-muted-foreground"},xe={class:"flex items-center gap-2"},pe={class:"font-semibold text-foreground"},ye={key:0,class:"mt-1"},ke={class:"grid gap-4 lg:grid-cols-3"},ve={class:"rounded-2xl border border-sidebar-border/60 bg-background p-5"},Ae={class:"mt-3 text-lg font-semibold"},qe={class:"rounded-2xl border border-sidebar-border/60 bg-background p-5"},he={class:"mt-3 text-lg font-semibold"},we={class:"rounded-2xl border border-sidebar-border/60 bg-background p-5"},Se={class:"mt-3 text-lg font-semibold"},Ne={class:"grid gap-4 lg:grid-cols-2"},Re={class:"rounded-2xl border border-sidebar-border/60 bg-background p-6"},Ie={class:"mt-4 grid gap-3 text-sm text-muted-foreground"},He={class:"rounded-2xl border border-sidebar-border/60 bg-background p-6"},Ce={class:"mt-4 rounded-xl border border-dashed border-sidebar-border/70 p-4 text-sm text-muted-foreground"},De={key:0,class:"flex flex-wrap gap-3"},Me=["src","alt"],Te={key:1},$e={key:0,class:"mt-4 text-xs text-amber-600"},Be={key:1,class:"rounded-2xl border border-sidebar-border/60 bg-background p-6"},Ue={class:"mt-4 grid gap-3 text-sm text-muted-foreground sm:grid-cols-2"},Fe={key:2,class:"rounded-2xl border border-sidebar-border/60 bg-background p-6"},Ve={class:"mt-4 grid gap-3 text-sm text-muted-foreground sm:grid-cols-2"},Ee={class:"rounded-2xl border border-sidebar-border/60 bg-background p-6"},Oe={key:0,class:"mt-4 grid gap-3 text-sm text-muted-foreground sm:grid-cols-2"},Pe={key:1,class:"mt-3 text-sm text-muted-foreground"},je={key:3,class:"rounded-2xl border border-sidebar-border/60 bg-background p-6"},Le={class:"mt-4 grid gap-3 text-sm text-muted-foreground sm:grid-cols-2"},Je=C({__name:"ScanResult",props:{item:{},status:{},canReview:{type:Boolean},canAssign:{type:Boolean},availableAdmins:{},assignmentNotice:{}},setup(s){const a=s,y=f(()=>a.item.equipmentImageUrls.map(g=>g.startsWith("http")?g:`/storage/${g}`)),w=[{title:"Dashboard",href:E().url},{title:"Scanner",href:"/scan"},{title:a.item.uniqueId,href:`/scan/${a.item.uniqueId}`}],u=v({acceptRepair:!0,comments:a.item.repairComments??""}),c=v({assignedAdminId:a.item.assignedAdmin?.id??""}),S=f(()=>!!(a.item.specification.memory||a.item.specification.storage||a.item.specification.operatingSystem||a.item.specification.networkAddress||a.item.specification.accessories)),N=f(()=>!!(a.item.locationAssignment.assignedTo||a.item.locationAssignment.officeDivision||a.item.locationAssignment.dateIssued)),R=f(()=>!!(a.item.scheduledMaintenance.date||a.item.scheduledMaintenance.remarks));function I(){u.post(`/scan/${a.item.uniqueId}/review`,{preserveScroll:!0})}function H(){c.put(`/scan/${a.item.uniqueId}/assign`,{preserveScroll:!0})}return(g,t)=>(r(),d(p,null,[b(n(D),{title:`${s.item.equipmentName} | Scan Result`},null,8,["title"]),b(V,{breadcrumbs:w},{default:x(()=>[e("div",P,[e("section",j,[s.assignmentNotice?(r(),d("div",L,o(s.assignmentNotice),1)):l("",!0),e("div",W,[e("div",z,[t[2]||(t[2]=e("p",{class:"text-xs uppercase tracking-[0.3em] text-muted-foreground"}," Scan result ",-1)),e("h1",Y,o(s.item.equipmentName),1),e("p",G,[i(" Unique ID "+o(s.item.uniqueId)+" ",1),s.item.brand?(r(),d("span",J," • "+o(s.item.brand),1)):l("",!0),s.item.model?(r(),d("span",K," • "+o(s.item.model),1)):l("",!0)])]),e("div",Q,[e("span",{class:T(["inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold",s.status==="active"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200":"bg-amber-100 text-amber-700 dark:bg-amber-500/20 dark:text-amber-200"])},o(s.status==="active"?"Active asset":"Archived asset"),3),s.item.repairStatus==="accepted"?(r(),d("span",X,[b(n(U),{class:"h-3.5 w-3.5"}),t[3]||(t[3]=i(" Accepted for repair ",-1))])):l("",!0),s.status==="active"&&s.canAssign?(r(),M(n(A),{key:1,href:`/inventory/${s.item.uniqueId}/edit`,class:"rounded-full border border-sidebar-border/70 px-4 py-2 text-sm font-semibold text-muted-foreground transition-colors hover:bg-muted/40"},{default:x(()=>[...t[4]||(t[4]=[i(" Edit enrollment ",-1)])]),_:1},8,["href"])):l("",!0),b(n(A),{href:"/scan",class:"rounded-full border border-sidebar-border/70 px-4 py-2 text-sm font-semibold text-muted-foreground transition-colors hover:bg-muted/40"},{default:x(()=>[...t[5]||(t[5]=[i(" Scan another ",-1)])]),_:1})])])]),s.status==="active"&&(s.canReview||s.canAssign)?(r(),d("section",Z,[e("div",_,[t[7]||(t[7]=e("h2",{class:"text-base font-semibold"},"Repair review",-1)),t[8]||(t[8]=e("p",{class:"mt-2 text-sm text-muted-foreground"}," Mark the record as accepted for repair and record remarks. ",-1)),s.canReview?(r(),d("div",ee,[q(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=m=>n(u).comments=m),rows:"4",placeholder:"Add repair remarks...",class:"w-full rounded-xl border border-sidebar-border/70 bg-background px-3 py-2 text-sm"},null,512),[[$,n(u).comments]]),e("button",{type:"button",class:"w-full rounded-xl bg-[#2563eb] px-4 py-2.5 text-sm font-semibold text-white transition-colors hover:bg-[#1d4ed8] disabled:cursor-not-allowed disabled:opacity-60",disabled:n(u).processing,onClick:I},o(n(u).processing?"Saving...":"Accept for repair"),9,te),n(u).errors.acceptRepair?(r(),d("p",se,o(n(u).errors.acceptRepair),1)):l("",!0),n(u).errors.comments?(r(),d("p",oe,o(n(u).errors.comments),1)):l("",!0)])):(r(),d("p",re," You can view the repair status but cannot update it. ")),e("div",de,[e("p",null,[t[6]||(t[6]=i(" Status: ",-1)),e("span",ie,o(s.item.repairStatus==="accepted"?"Accepted":"Pending"),1)]),s.item.acceptedForRepairAt?(r(),d("p",ne," Accepted on "+o(s.item.acceptedForRepairAt),1)):l("",!0)])]),e("div",ae,[t[10]||(t[10]=e("h2",{class:"text-base font-semibold"},"Assignment",-1)),t[11]||(t[11]=e("p",{class:"mt-2 text-sm text-muted-foreground"}," Assign this record to an available admin for processing. ",-1)),s.canAssign?(r(),d("div",le,[e("div",me,[q(e("select",{"onUpdate:modelValue":t[1]||(t[1]=m=>n(c).assignedAdminId=m),class:"w-full appearance-none rounded-xl border border-sidebar-border/70 bg-background px-3 py-2 text-sm"},[t[9]||(t[9]=e("option",{value:""},"Unassigned",-1)),(r(!0),d(p,null,h(s.availableAdmins,m=>(r(),d("option",{key:m.id,value:m.id},o(m.name)+" — "+o(m.email),9,ue))),128))],512),[[B,n(c).assignedAdminId]]),b(n(O),{class:"pointer-events-none absolute right-3 top-2.5 h-4 w-4 text-muted-foreground"})]),e("button",{type:"button",class:"w-full rounded-xl border border-sidebar-border/70 px-4 py-2.5 text-sm font-semibold text-muted-foreground transition-colors hover:bg-muted/40 disabled:cursor-not-allowed disabled:opacity-60",disabled:n(c).processing,onClick:H},o(n(c).processing?"Saving...":"Update assignment"),9,ce),n(c).errors.assignedAdminId?(r(),d("p",be,o(n(c).errors.assignedAdminId),1)):l("",!0)])):(r(),d("p",ge," Only super admins can assign records to admins. ")),e("div",fe,[e("p",xe,[b(n(F),{class:"h-4 w-4"}),e("span",pe,o(s.item.assignedAdmin?.name||"Not assigned"),1)]),s.item.assignedAdmin?.email?(r(),d("p",ye,o(s.item.assignedAdmin.email),1)):l("",!0)])])])):l("",!0),e("section",ke,[e("div",ve,[t[12]||(t[12]=e("p",{class:"text-xs uppercase tracking-[0.2em] text-muted-foreground"}," Equipment type ",-1)),e("p",Ae,o(s.item.equipmentType||"Not specified"),1)]),e("div",qe,[t[13]||(t[13]=e("p",{class:"text-xs uppercase tracking-[0.2em] text-muted-foreground"}," Serial number ",-1)),e("p",he,o(s.item.serialNumber||"Not recorded"),1)]),e("div",we,[t[14]||(t[14]=e("p",{class:"text-xs uppercase tracking-[0.2em] text-muted-foreground"}," Asset tag ",-1)),e("p",Se,o(s.item.assetTag||"Not recorded"),1)])]),e("section",Ne,[e("div",Re,[t[19]||(t[19]=e("h2",{class:"text-base font-semibold"},"Procurement & warranty",-1)),e("div",Ie,[e("p",null,[t[15]||(t[15]=e("span",{class:"font-semibold text-foreground"},"Supplier:",-1)),i(" "+o(s.item.supplier||"Not specified"),1)]),e("p",null,[t[16]||(t[16]=e("span",{class:"font-semibold text-foreground"},"Purchase date:",-1)),i(" "+o(s.item.purchaseDate||"Not recorded"),1)]),e("p",null,[t[17]||(t[17]=e("span",{class:"font-semibold text-foreground"},"Expiry date:",-1)),i(" "+o(s.item.expiryDate||"Not recorded"),1)]),e("p",null,[t[18]||(t[18]=e("span",{class:"font-semibold text-foreground"},"Warranty status:",-1)),i(" "+o(s.item.warrantyStatus||"Not recorded"),1)])])]),e("div",He,[t[20]||(t[20]=e("h2",{class:"text-base font-semibold"},"Equipment image",-1)),e("div",Ce,[y.value.length?(r(),d("div",De,[(r(!0),d(p,null,h(y.value,(m,k)=>(r(),d("img",{key:`image-${k}`,src:m,alt:`${s.item.equipmentName} photo ${k+1}`,class:"h-20 w-20 rounded-xl object-cover"},null,8,Me))),128))])):(r(),d("p",Te,"Images not provided."))]),s.status==="archived"&&s.item.archivedAt?(r(),d("p",$e," Archived on "+o(s.item.archivedAt),1)):l("",!0)])]),S.value?(r(),d("section",Be,[t[26]||(t[26]=e("h2",{class:"text-base font-semibold"},"Specification",-1)),e("div",Ue,[e("p",null,[t[21]||(t[21]=e("span",{class:"font-semibold text-foreground"},"Memory:",-1)),i(" "+o(s.item.specification.memory||"—"),1)]),e("p",null,[t[22]||(t[22]=e("span",{class:"font-semibold text-foreground"},"Storage:",-1)),i(" "+o(s.item.specification.storage||"—"),1)]),e("p",null,[t[23]||(t[23]=e("span",{class:"font-semibold text-foreground"},"Operating system:",-1)),i(" "+o(s.item.specification.operatingSystem||"—"),1)]),e("p",null,[t[24]||(t[24]=e("span",{class:"font-semibold text-foreground"},"Network/IP:",-1)),i(" "+o(s.item.specification.networkAddress||"—"),1)]),e("p",null,[t[25]||(t[25]=e("span",{class:"font-semibold text-foreground"},"Accessories:",-1)),i(" "+o(s.item.specification.accessories||"—"),1)])])])):l("",!0),N.value?(r(),d("section",Fe,[t[30]||(t[30]=e("h2",{class:"text-base font-semibold"},"Location & Assignment",-1)),e("div",Ve,[e("p",null,[t[27]||(t[27]=e("span",{class:"font-semibold text-foreground"},"Assigned to:",-1)),i(" "+o(s.item.locationAssignment.assignedTo||"—"),1)]),e("p",null,[t[28]||(t[28]=e("span",{class:"font-semibold text-foreground"},"Office/division:",-1)),i(" "+o(s.item.locationAssignment.officeDivision||"—"),1)]),e("p",null,[t[29]||(t[29]=e("span",{class:"font-semibold text-foreground"},"Date issued:",-1)),i(" "+o(s.item.locationAssignment.dateIssued||"—"),1)])])])):l("",!0),e("section",Ee,[t[38]||(t[38]=e("h2",{class:"text-base font-semibold"},"Request History",-1)),s.item.requestHistory.natureOfRequest||s.item.requestHistory.date||s.item.requestHistory.actionTaken||s.item.requestHistory.assignedStaff||s.item.requestHistory.remarks||s.item.requestHistory.requestStatus||s.item.requestHistory.requestControlTicketNumber?(r(),d("div",Oe,[e("p",null,[t[31]||(t[31]=e("span",{class:"font-semibold text-foreground"},"Nature of request:",-1)),i(" "+o(s.item.requestHistory.natureOfRequest||"—"),1)]),e("p",null,[t[32]||(t[32]=e("span",{class:"font-semibold text-foreground"},"Date:",-1)),i(" "+o(s.item.requestHistory.date||"—"),1)]),e("p",null,[t[33]||(t[33]=e("span",{class:"font-semibold text-foreground"},"Action taken:",-1)),i(" "+o(s.item.requestHistory.actionTaken||"—"),1)]),e("p",null,[t[34]||(t[34]=e("span",{class:"font-semibold text-foreground"},"Assigned staff:",-1)),i(" "+o(s.item.requestHistory.assignedStaff||"—"),1)]),e("p",null,[t[35]||(t[35]=e("span",{class:"font-semibold text-foreground"},"Remarks:",-1)),i(" "+o(s.item.requestHistory.remarks||"—"),1)]),e("p",null,[t[36]||(t[36]=e("span",{class:"font-semibold text-foreground"},"Request status:",-1)),i(" "+o(s.item.requestHistory.requestStatus||"—"),1)]),e("p",null,[t[37]||(t[37]=e("span",{class:"font-semibold text-foreground"},"Control ticket no.:",-1)),i(" "+o(s.item.requestHistory.requestControlTicketNumber||"—"),1)])])):(r(),d("p",Pe," No maintenance or service history recorded yet. "))]),R.value?(r(),d("section",je,[t[41]||(t[41]=e("h2",{class:"text-base font-semibold"},"Scheduled Maintenance",-1)),e("div",Le,[e("p",null,[t[39]||(t[39]=e("span",{class:"font-semibold text-foreground"},"Date:",-1)),i(" "+o(s.item.scheduledMaintenance.date||"—"),1)]),e("p",null,[t[40]||(t[40]=e("span",{class:"font-semibold text-foreground"},"Remarks:",-1)),i(" "+o(s.item.scheduledMaintenance.remarks||"—"),1)])])])):l("",!0)])]),_:1})],64))}});export{Je as default};
