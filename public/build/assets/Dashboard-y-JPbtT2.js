import{d as q,c as l,a as u,u as c,h as C,w as m,b as e,t as o,k as x,o as a,F as f,n as N,m as T,l as p,e as b,p as g}from"./app-Cclhwly9.js";import{_ as h}from"./Icon.vue_vue_type_script_setup_true_lang-Bh0ZzI_P.js";import{_ as F}from"./AppLayout.vue_vue_type_script_setup_true_lang-pl8mKwt0.js";import{d as U}from"./lazy-CSzc0j1S.js";import"./upload-BeUrIptr.js";import"./trash-2-Bwp3o_GM.js";import"./camera-BRWBg8pt.js";import"./check-vFsMzDpT.js";import"./image-BXPBYIkh.js";import"./sun-BA3gQ1Nm.js";import"./user-plus-Dug9U5gu.js";const D={class:"flex flex-1 flex-col gap-6 p-4 sm:p-6"},Q={class:"grid gap-4 sm:grid-cols-2"},B={class:"flex items-start gap-4 rounded-xl border border-sidebar-border/60 bg-card p-4 shadow-sm dark:border-white/10"},L={class:"flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-primary/10 text-primary"},R={class:"min-w-0 flex-1"},V={class:"mt-1 text-2xl font-semibold tabular-nums text-foreground"},S={class:"flex items-start gap-4 rounded-xl border border-sidebar-border/60 bg-card p-4 shadow-sm dark:border-white/10"},O={class:"flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-primary/10 text-primary"},j={class:"min-w-0 flex-1"},z={class:"mt-1 text-2xl font-semibold tabular-nums text-foreground"},$={class:"flex flex-col gap-3"},A={class:"overflow-hidden rounded-xl border border-sidebar-border/60 bg-card shadow-sm dark:border-white/10"},E={class:"max-h-[420px] overflow-auto"},I={class:"w-full min-w-[720px] text-xs"},P={class:"divide-y divide-sidebar-border/60 text-foreground dark:divide-white/10"},G={class:"px-3 py-2 font-medium"},H={key:1},J=["title"],K=["title"],M={class:"px-3 py-2"},W={class:"px-3 py-2"},X={class:"whitespace-nowrap px-3 py-2 text-muted-foreground"},Y={key:0},Z={key:0,class:"border-t border-sidebar-border/60 px-3 py-2 text-center dark:border-white/10"},y="inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] font-medium leading-4",ce=q({__name:"Dashboard",props:{queuedCountForUser:{},totalRequestsForUser:{},currentQueue:{},activeQueueTotal:{}},setup(i){const _=[{title:"User Dashboard",href:U().url}],d={emerald:"border-emerald-500/30 bg-emerald-500/10 text-emerald-700 dark:text-emerald-300",blue:"border-blue-500/30 bg-blue-500/10 text-blue-700 dark:text-blue-300",amber:"border-amber-500/30 bg-amber-500/10 text-amber-700 dark:text-amber-300",rose:"border-rose-500/30 bg-rose-500/10 text-rose-700 dark:text-rose-300",slate:"border-slate-500/20 bg-slate-500/10 text-slate-600 dark:text-slate-300"};function k(r){const t=(r??"").toLowerCase();return t.includes("completed")||t.includes("closed")?d.emerald:t.includes("ongoing")||t.includes("assigned")?d.blue:t.includes("pending")||t.includes("review")?d.amber:d.slate}function v(r){const t=(r??"").toLowerCase();return t.includes("simple")?d.emerald:t.includes("average")||t.includes("moderate")?d.amber:t.includes("complex")||t.includes("urgent")?d.rose:d.slate}function w(r){if(!r)return"—";const t=new Date(r);return Number.isNaN(t.getTime())?r:new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric"}).format(t)}function n(r,t="—"){return r&&r.trim().length>0?r:t}return(r,t)=>(a(),l(f,null,[u(c(C),{title:"User Dashboard"}),u(F,{breadcrumbs:_},{default:m(()=>[e("div",D,[e("div",Q,[e("div",B,[e("div",L,[u(h,{name:"clipboardList",class:"h-5 w-5"})]),e("div",R,[t[0]||(t[0]=e("p",{class:"text-[11px] font-medium uppercase tracking-wider text-muted-foreground"}," Queued tickets ",-1)),e("p",V,o(i.queuedCountForUser),1),t[1]||(t[1]=e("p",{class:"mt-0.5 text-xs text-muted-foreground"}," Pending or ongoing (your requests) ",-1))])]),e("div",S,[e("div",O,[u(h,{name:"layers",class:"h-5 w-5"})]),e("div",j,[t[2]||(t[2]=e("p",{class:"text-[11px] font-medium uppercase tracking-wider text-muted-foreground"}," Total requests ",-1)),e("p",z,o(i.totalRequestsForUser),1),t[3]||(t[3]=e("p",{class:"mt-0.5 text-xs text-muted-foreground"}," All-time requests you have filed ",-1))])])]),e("div",$,[t[6]||(t[6]=e("h2",{class:"text-sm font-semibold text-foreground"}," Current Queue ",-1)),t[7]||(t[7]=e("p",{class:"text-xs text-muted-foreground"}," Latest 15 active requests (pending and ongoing), oldest first by date filed. ",-1)),e("div",A,[e("div",E,[e("table",I,[t[5]||(t[5]=e("thead",{class:"sticky top-0 z-10 border-b border-sidebar-border/60 bg-muted/50 text-[11px] uppercase tracking-wide text-muted-foreground dark:border-white/10 dark:bg-white/5"},[e("tr",null,[e("th",{class:"px-3 py-2.5 text-left font-semibold"}," Control Ticket No. "),e("th",{class:"px-3 py-2.5 text-left font-semibold"}," Nature of Request "),e("th",{class:"px-3 py-2.5 text-left font-semibold"}," Office "),e("th",{class:"px-3 py-2.5 text-left font-semibold"}," Status "),e("th",{class:"px-3 py-2.5 text-left font-semibold"}," Category "),e("th",{class:"px-3 py-2.5 text-left font-semibold"}," Date Filed ")])],-1)),e("tbody",P,[(a(!0),l(f,null,N(i.currentQueue,s=>(a(),l("tr",{key:s.id,class:"hover:bg-muted/30 dark:hover:bg-white/5"},[e("td",G,[s.showUrl?(a(),T(c(p),{key:0,href:s.showUrl,class:"text-primary hover:underline"},{default:m(()=>[b(o(s.controlTicketNumber),1)]),_:2},1032,["href"])):(a(),l("span",H,o(s.controlTicketNumber),1))]),e("td",{class:"max-w-[180px] truncate px-3 py-2",title:n(s.natureOfRequest)},o(n(s.natureOfRequest,"—")),9,J),e("td",{class:"max-w-[120px] truncate px-3 py-2",title:n(s.office)},o(n(s.office)),9,K),e("td",M,[e("span",{class:g([y,k(s.status)])},o(n(s.status,"—")),3)]),e("td",W,[e("span",{class:g([y,v(s.category)])},o(n(s.category,"—")),3)]),e("td",X,o(w(s.dateFiled)),1)]))),128)),i.currentQueue.length===0?(a(),l("tr",Y,[...t[4]||(t[4]=[e("td",{colspan:"6",class:"px-4 py-8 text-center text-xs text-muted-foreground"}," No active requests in the queue. ",-1)])])):x("",!0)])])]),i.activeQueueTotal>15?(a(),l("div",Z,[u(c(p),{href:"/requests",class:"text-xs font-medium text-primary hover:underline"},{default:m(()=>[b(" View all "+o(i.activeQueueTotal)+" active requests → ",1)]),_:1})])):x("",!0)])])])]),_:1})],64))}});export{ce as default};
