import{d as A,f as v,c as a,a as o,u as e,h as C,w as d,b as t,t as m,p as M,i as x,e as n,j as U,o as l,F as S,n as h,q as D,k as w,B as P,l as B}from"./app-BbDXI_Od.js";import{_ as V}from"./HeadingSmall.vue_vue_type_script_setup_true_lang-CPR_9Cde.js";import{_ as p,a as y,b as c}from"./Label.vue_vue_type_script_setup_true_lang-CQ7RGhml.js";import{a as k,_ as L}from"./AppLayout.vue_vue_type_script_setup_true_lang-D1uJhlkX.js";import{d as O}from"./lazy-CSzc0j1S.js";const R={class:"flex flex-1 flex-col gap-6 p-6"},T={class:"rounded-3xl border border-sidebar-border/60 bg-background p-6"},j={class:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between"},W={class:"mt-2 text-2xl font-semibold"},q={class:"text-sm text-muted-foreground"},z={class:"text-xs text-muted-foreground"},I={class:"flex flex-wrap gap-2"},G={class:"inline-flex items-center rounded-full bg-muted px-3 py-1 text-xs font-semibold text-foreground"},H={class:"grid gap-6 lg:grid-cols-[1.1fr_0.9fr]"},J={class:"space-y-6"},K={class:"rounded-3xl border border-sidebar-border/60 bg-background p-6"},Q={class:"grid gap-2"},X={class:"grid gap-2"},Y={class:"grid gap-2"},Z={class:"rounded-3xl border border-sidebar-border/60 bg-background p-6"},ee={class:"grid gap-2"},se=["value"],te={class:"grid gap-2"},oe={class:"flex items-center gap-3"},ie={key:0,class:"text-sm text-emerald-600"},re={class:"rounded-3xl border border-sidebar-border/60 bg-background p-6"},de={class:"grid gap-2"},ae=["value"],ne={key:0,class:"text-sm text-emerald-600"},le={class:"flex items-center gap-3 text-sm"},ue={key:0,class:"text-sm text-emerald-600"},me={class:"space-y-6"},fe={class:"rounded-3xl border border-sidebar-border/60 bg-background p-6"},pe={class:"grid gap-2"},ge={class:"grid gap-2"},ce={key:0,class:"text-sm text-emerald-600"},be={class:"mt-6 border-t border-sidebar-border/60 pt-6"},_e={class:"mb-3 text-sm text-muted-foreground"},ve={key:1,class:"text-sm text-emerald-600"},xe={key:2,class:"mt-2 text-sm text-emerald-600"},ye={class:"rounded-3xl border border-sidebar-border/60 bg-background p-6"},ke={key:0,class:"mt-4 text-sm text-muted-foreground"},we={key:1,class:"mt-4 space-y-3 text-sm"},Ve={class:"font-semibold text-foreground"},$e={class:"mt-1"},Ne=A({__name:"Show",props:{user:{},officeDesignation:{},officeDesignations:{},roleOptions:{},auditLogs:{}},setup(E){const r=E,N=[{title:"Dashboard",href:O().url},{title:"User management",href:"/admin/users"},{title:r.user.name,href:`/admin/users/${r.user.id}`}],u=v({name:r.user.name,email:r.user.email,phone:r.user.phone??""}),f=v({office_designation_id:r.user.office_designation_id??r.officeDesignation?.id??null,position_title:r.user.position_title??""}),b=v({role:r.user.role}),_=v({is_active:r.user.is_active}),g=v({password:"",password_confirmation:""}),$=v({});return(Se,s)=>(l(),a(S,null,[o(e(C),{title:`Manage ${r.user.name}`},null,8,["title"]),o(L,{breadcrumbs:N},{default:d(()=>[t("div",R,[t("section",T,[t("div",j,[t("div",null,[s[15]||(s[15]=t("p",{class:"text-xs uppercase tracking-[0.3em] text-muted-foreground"}," User management ",-1)),t("h1",W,m(r.user.name),1),t("p",q,m(r.user.email),1),t("p",z," 2FA: "+m(r.user.two_factor_enabled?"Enabled":"Disabled"),1)]),t("div",I,[t("span",{class:M(["inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold",r.user.is_active?"bg-emerald-100 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200":"bg-rose-100 text-rose-700 dark:bg-rose-500/20 dark:text-rose-200"])},m(r.user.is_active?"Active":"Inactive"),3),t("span",G,m(r.roleOptions[r.user.role]||r.user.role),1)])])]),t("section",H,[t("div",J,[t("div",K,[o(V,{title:"Profile details",description:"Update name, email, and contact information."}),t("form",{onSubmit:s[3]||(s[3]=x(i=>e(u).post(`/admin/users/${r.user.id}`),["prevent"])),class:"mt-6 space-y-6"},[t("div",Q,[o(e(p),{for:"name"},{default:d(()=>[...s[16]||(s[16]=[n("Name",-1)])]),_:1}),o(e(y),{id:"name",modelValue:e(u).name,"onUpdate:modelValue":s[0]||(s[0]=i=>e(u).name=i)},null,8,["modelValue"]),o(c,{message:e(u).errors.name},null,8,["message"])]),t("div",X,[o(e(p),{for:"email"},{default:d(()=>[...s[17]||(s[17]=[n("Email",-1)])]),_:1}),o(e(y),{id:"email",type:"email",modelValue:e(u).email,"onUpdate:modelValue":s[1]||(s[1]=i=>e(u).email=i)},null,8,["modelValue"]),o(c,{message:e(u).errors.email},null,8,["message"])]),t("div",Y,[o(e(p),{for:"phone"},{default:d(()=>[...s[18]||(s[18]=[n("Phone",-1)])]),_:1}),o(e(y),{id:"phone",modelValue:e(u).phone,"onUpdate:modelValue":s[2]||(s[2]=i=>e(u).phone=i)},null,8,["modelValue"]),o(c,{message:e(u).errors.phone},null,8,["message"])]),o(e(k),{disabled:e(u).processing},{default:d(()=>[...s[19]||(s[19]=[n(" Save profile ",-1)])]),_:1},8,["disabled"])],32)]),t("div",Z,[o(V,{title:"Work details",description:"Update designated office and position."}),t("form",{onSubmit:s[6]||(s[6]=x(i=>e(f).post(`/admin/users/${r.user.id}/work`),["prevent"])),class:"mt-6 space-y-6"},[t("div",ee,[o(e(p),{for:"office_designation_id"},{default:d(()=>[...s[20]||(s[20]=[n("Designated office",-1)])]),_:1}),U(t("select",{id:"office_designation_id","onUpdate:modelValue":s[4]||(s[4]=i=>e(f).office_designation_id=i),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[s[21]||(s[21]=t("option",{value:null,disabled:""},"Select an office",-1)),(l(!0),a(S,null,h(r.officeDesignations,i=>(l(),a("option",{key:i.id,value:i.id},m(i.name),9,se))),128))],512),[[D,e(f).office_designation_id,void 0,{number:!0}]]),o(c,{message:e(f).errors.office_designation_id},null,8,["message"])]),t("div",te,[o(e(p),{for:"position_title"},{default:d(()=>[...s[22]||(s[22]=[n("Position / Designation",-1)])]),_:1}),o(e(y),{id:"position_title",modelValue:e(f).position_title,"onUpdate:modelValue":s[5]||(s[5]=i=>e(f).position_title=i)},null,8,["modelValue"]),o(c,{message:e(f).errors.position_title},null,8,["message"])]),t("div",oe,[o(e(k),{disabled:e(f).processing},{default:d(()=>[...s[23]||(s[23]=[n(" Save work details ",-1)])]),_:1},8,["disabled"]),e(f).recentlySuccessful?(l(),a("p",ie," Work details saved. ")):w("",!0)])],32)]),t("div",re,[o(V,{title:"Access controls",description:"Assign roles and update account status."}),t("form",{onSubmit:s[8]||(s[8]=x(i=>e(b).post(`/admin/users/${r.user.id}/role`),["prevent"])),class:"mt-6 space-y-4"},[t("div",de,[o(e(p),{for:"role"},{default:d(()=>[...s[24]||(s[24]=[n("Role",-1)])]),_:1}),U(t("select",{id:"role","onUpdate:modelValue":s[7]||(s[7]=i=>e(b).role=i),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[(l(!0),a(S,null,h(r.roleOptions,(i,F)=>(l(),a("option",{key:F,value:F},m(i),9,ae))),128))],512),[[D,e(b).role]]),o(c,{message:e(b).errors.role},null,8,["message"])]),o(e(k),{disabled:e(b).processing},{default:d(()=>[...s[25]||(s[25]=[n(" Update role ",-1)])]),_:1},8,["disabled"]),e(b).recentlySuccessful?(l(),a("p",ne," Role updated. ")):w("",!0)],32),t("form",{onSubmit:s[10]||(s[10]=x(i=>e(_).post(`/admin/users/${r.user.id}/status`),["prevent"])),class:"mt-6 space-y-4"},[t("div",le,[U(t("input",{id:"is_active",type:"checkbox","onUpdate:modelValue":s[9]||(s[9]=i=>e(_).is_active=i),class:"h-4 w-4 rounded border-slate-600 text-sky-500"},null,512),[[P,e(_).is_active]]),o(e(p),{for:"is_active"},{default:d(()=>[...s[26]||(s[26]=[n("Account active",-1)])]),_:1})]),o(c,{message:e(_).errors.is_active},null,8,["message"]),o(e(k),{variant:"secondary",disabled:e(_).processing},{default:d(()=>[...s[27]||(s[27]=[n(" Update status ",-1)])]),_:1},8,["disabled"]),e(_).recentlySuccessful?(l(),a("p",ue," Status updated. ")):w("",!0)],32)])]),t("div",me,[t("div",fe,[o(V,{title:"Password reset",description:"Set a new password for this account."}),t("form",{onSubmit:s[13]||(s[13]=x(i=>e(g).post(`/admin/users/${r.user.id}/password`),["prevent"])),class:"mt-6 space-y-4"},[t("div",pe,[o(e(p),{for:"password"},{default:d(()=>[...s[28]||(s[28]=[n("New password",-1)])]),_:1}),o(e(y),{id:"password",type:"password",modelValue:e(g).password,"onUpdate:modelValue":s[11]||(s[11]=i=>e(g).password=i)},null,8,["modelValue"]),o(c,{message:e(g).errors.password},null,8,["message"])]),t("div",ge,[o(e(p),{for:"password_confirmation"},{default:d(()=>[...s[29]||(s[29]=[n("Confirm password",-1)])]),_:1}),o(e(y),{id:"password_confirmation",type:"password",modelValue:e(g).password_confirmation,"onUpdate:modelValue":s[12]||(s[12]=i=>e(g).password_confirmation=i)},null,8,["modelValue"])]),o(e(k),{variant:"secondary",disabled:e(g).processing},{default:d(()=>[...s[30]||(s[30]=[n(" Update password ",-1)])]),_:1},8,["disabled"]),e(g).recentlySuccessful?(l(),a("p",ce," Password updated. ")):w("",!0)],32),t("div",be,[s[31]||(s[31]=t("p",{class:"mb-2 text-sm font-medium text-foreground"}," Email verification ",-1)),t("p",_e,m(r.user.email_verified_at?"This account's email is verified. The user can sign in without verifying.":"Mark this account's email as verified so the user can sign in without following the verification link."),1),r.user.email_verified_at?(l(),a("p",ve," Email verified ")):(l(),a("form",{key:0,onSubmit:s[14]||(s[14]=x(i=>e($).post(`/admin/users/${r.user.id}/verify-email`),["prevent"])),class:"inline"},[o(e(k),{type:"submit",variant:"outline",disabled:e($).processing},{default:d(()=>[n(m(e($).processing?"Verifyingâ€¦":"Force verify email"),1)]),_:1},8,["disabled"])],32)),e($).recentlySuccessful?(l(),a("p",xe," Email marked as verified. ")):w("",!0)])]),t("div",ye,[o(V,{title:"Audit trail",description:"Recent actions taken for this account."}),r.auditLogs.length?(l(),a("div",we,[(l(!0),a(S,null,h(r.auditLogs,i=>(l(),a("div",{key:i.id,class:"rounded-xl border border-sidebar-border/60 px-4 py-3 text-xs text-muted-foreground"},[t("p",Ve,m(i.action),1),t("p",$e,m(i.created_at),1)]))),128))])):(l(),a("div",ke," No audit activity recorded yet. ")),o(e(B),{href:"/admin/audit-logs",class:"mt-4 inline-flex text-xs font-semibold uppercase tracking-[0.2em] text-muted-foreground hover:text-foreground"},{default:d(()=>[...s[32]||(s[32]=[n(" View full audit log ",-1)])]),_:1})])])])])]),_:1})],64))}});export{Ne as default};
