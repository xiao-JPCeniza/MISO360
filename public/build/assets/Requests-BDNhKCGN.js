import{d as L,g as v,r as $,c as i,a as p,u as l,h as I,w as h,o as a,b as e,l as k,e as N,j as B,v as T,t as r,k as S,F as R,n as D,p as f,m as A}from"./app-BbDXI_Od.js";import{_ as x}from"./Icon.vue_vue_type_script_setup_true_lang-Dhso_EX_.js";import{_ as M}from"./AppLayout.vue_vue_type_script_setup_true_lang-D1uJhlkX.js";import{r as w,g as F,a as O}from"./requestBadges-UCv4_yyd.js";import{d as P}from"./lazy-CSzc0j1S.js";import"./upload-MJX2utxv.js";import"./trash-2-Dvl-OmRL.js";import"./camera-B7HD2y34.js";import"./check-Bvjw97VO.js";import"./image-VKKv4er0.js";import"./sun-DKM394Go.js";import"./user-plus-C99eKk_D.js";const G={key:0,class:"flex flex-1 flex-col bg-background p-5 sm:p-6"},J={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},K={class:"relative w-full max-w-xs"},W={class:"mt-1 text-[11px] text-muted-foreground"},X={class:"mt-3 rounded-md border border-border bg-card shadow-sm dark:border-white/10"},Y={class:"max-h-[560px] overflow-auto"},Z={class:"w-full min-w-[980px] text-[11px] text-foreground"},q={class:"divide-y divide-border text-xs text-foreground dark:divide-white/10"},ee={class:"px-3 py-2 font-medium"},te={class:"px-3 py-2"},se=["title"],oe={class:"px-3 py-2"},re=["title"],ae={class:"px-3 py-2"},ne=["title"],ie={class:"px-3 py-2 text-muted-foreground"},le={class:"px-3 py-2"},de=["title"],ce={class:"px-3 py-2"},pe=["title"],ue={class:"px-3 py-2"},me=["title"],fe={class:"px-3 py-2"},xe=["title"],be={class:"px-3 py-2 text-muted-foreground"},he=["title"],ge={key:1,class:"text-[11px]"},ye={class:"px-3 py-2"},_e={key:1,class:"inline-flex h-6 w-6 items-center justify-center rounded border border-border text-muted-foreground dark:border-white/20"},ke={key:0},we={key:1,class:"flex flex-1 flex-col gap-5 p-6"},ve={class:"flex flex-col gap-3"},Ne={class:"text-xs uppercase tracking-[0.2em] text-muted-foreground"},Re={class:"text-xl font-semibold text-foreground"},Ce={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},Be={class:"relative w-full sm:max-w-sm"},Te={class:"text-xs text-muted-foreground"},Se={class:"rounded-2xl border border-sidebar-border/60 bg-background shadow-sm"},De={class:"max-h-[560px] overflow-auto"},Ae={class:"w-full min-w-[1200px] text-sm"},Fe={class:"divide-y divide-muted/40 text-sm text-foreground"},Oe={class:"px-3 py-2 font-medium"},Ue={key:1},Qe={class:"px-3 py-2"},Ve=["title"],je={class:"px-3 py-2"},ze=["title"],He={class:"px-3 py-2 text-muted-foreground"},Ee={class:"px-3 py-2"},Le=["title"],$e={class:"px-3 py-2"},Ie=["title"],Me={class:"px-3 py-2"},Pe=["title"],Ge={class:"px-3 py-2"},Je=["title"],Ke={class:"px-3 py-2"},We=["title"],Xe={class:"px-3 py-2 text-muted-foreground"},Ye=["title"],Ze={key:1,class:"text-xs"},qe={class:"px-3 py-2 text-muted-foreground"},et={key:0},U="inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] font-medium leading-4",mt=L({__name:"Requests",props:{requests:{},isAdmin:{type:Boolean}},setup(Q){const c=Q,g=v(()=>c.isAdmin?"Requests":"My Requests"),V=v(()=>[{title:"Dashboard",href:P().url},{title:g.value,href:"/requests"}]),b=$(""),y=o=>(o??"").toLowerCase(),u={emerald:"border-emerald-500/30 bg-emerald-500/10 text-emerald-700 dark:text-emerald-300",blue:"border-blue-500/30 bg-blue-500/10 text-blue-700 dark:text-blue-300",amber:"border-amber-500/30 bg-amber-500/10 text-amber-700 dark:text-amber-300",purple:"border-purple-500/30 bg-purple-500/10 text-purple-700 dark:text-purple-300",slate:"border-slate-500/20 bg-slate-500/10 text-slate-600 dark:text-slate-300"},j=o=>{const s=y(o);return s.includes("password")?u.blue:s.includes("repair")?u.amber:s.includes("system")?u.purple:u.slate},z=o=>{const s=y(o);return s.includes("deliver")?u.blue:s.includes("interview")?u.purple:s.includes("remote")?u.emerald:s.includes("pick")?u.amber:u.slate},_=o=>{if(!o)return"—";const s=new Date(o);return Number.isNaN(s.getTime())?o:new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric"}).format(s)},n=(o,s="—")=>o&&o.trim().length>0?o:s,d=(o,s="Not set")=>o&&o.trim().length>0?o:s,H=["software license or activation request","computer repair","laptop repair","printer repair","cctv issue/repair","end-user equipment installation, setup, and configuration (connection of computers, monitors, printers, peripherals, and workstation relocation)","request for new it equipment (e.g., pc, printer, ups)","install/reformat operating system","installation of application software","network connectivity installation, repair, and maintenance services (lan and fiber optic cabling, network and wireless setup, repairs, upgrades, and network equipment deployment)","end-user devices component replacement","assess extent of hardware/software failure","system reinstallation/troubleshooting (toims, gaams, ecpac)","inspect unit","borrow unit","data recovery"],E=o=>{const s=y(o);return H.some(t=>s===t)},C=o=>c.isAdmin&&E(o.natureOfRequest)?`/requests/${o.id}/equipment-and-network`:c.isAdmin?`/requests/${o.id}`:o.showUrl,m=v(()=>{const o=y(b.value.trim());return o?c.isAdmin?c.requests.filter(s=>[s.controlTicketNumber,s.requestedBy].filter(Boolean).join(" ").toLowerCase().includes(o)):c.requests.filter(s=>[s.controlTicketNumber,s.natureOfRequest,s.office,s.requestedBy,s.assignedStaff,s.category,s.remarks,s.status,s.estimatedCompletionDate,_(s.dateFiled)].filter(Boolean).join(" ").toLowerCase().includes(o)):c.requests});return(o,s)=>(a(),i(R,null,[p(l(I),{title:g.value},null,8,["title"]),p(M,{breadcrumbs:V.value},{default:h(()=>[c.isAdmin?(a(),i("div",G,[e("div",J,[p(l(k),{href:"/requests/archive",class:"inline-flex w-fit items-center gap-1.5 rounded-md border border-border bg-background px-3 py-1.5 text-xs font-medium text-foreground shadow-sm transition hover:bg-muted dark:border-white/20 dark:hover:bg-white/10"},{default:h(()=>[p(x,{name:"archive",class:"h-3.5 w-3.5"}),s[2]||(s[2]=N(" Archive ",-1))]),_:1}),e("label",K,[s[3]||(s[3]=e("span",{class:"sr-only"},"Search Request Here",-1)),B(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>b.value=t),type:"search",placeholder:"Search Request Here",class:"h-9 w-full rounded-md border border-input bg-background px-3 pr-9 text-xs text-foreground shadow-sm transition placeholder:text-muted-foreground focus:border-ring focus:outline-none focus:ring-2 focus:ring-ring/50"},null,512),[[T,b.value]]),p(x,{name:"search",class:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground"})])]),e("p",W," Showing "+r(m.value.length)+" of "+r(c.requests.length)+" active requests (most recent 20, FIFO). ",1),e("div",X,[e("div",Y,[e("table",Z,[s[5]||(s[5]=e("thead",{class:"border-b border-border bg-muted/50 text-[11px] uppercase text-foreground dark:border-white/10 dark:bg-white/5"},[e("tr",null,[e("th",{colspan:"11",class:"px-3 py-2 text-center text-xs font-semibold"}," REQUEST FORM ")]),e("tr",{class:"border-t border-border dark:border-white/10"},[e("th",{class:"px-3 py-2 text-left font-semibold"},"Control Ticket No."),e("th",{class:"px-3 py-2 text-left font-semibold"},"Requested By"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Position/Designation"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Office"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Date Filed"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Nature of Request"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Request Description"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Status"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Category"),e("th",{class:"px-3 py-2 text-left font-semibold"},"QR Code"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Action")])],-1)),e("tbody",q,[(a(!0),i(R,null,D(m.value,t=>(a(),i("tr",{key:t.id,class:"odd:bg-background even:bg-muted/20 hover:bg-muted/40 dark:even:bg-white/5 dark:hover:bg-white/10"},[e("td",ee,r(t.controlTicketNumber),1),e("td",te,[e("span",{class:"block max-w-[140px] truncate",title:n(t.requestedBy)},r(n(t.requestedBy)),9,se)]),e("td",oe,[e("span",{class:"block max-w-[140px] truncate",title:n(t.positionTitle)},r(n(t.positionTitle)),9,re)]),e("td",ae,[e("span",{class:"block max-w-[140px] truncate",title:n(t.office)},r(n(t.office)),9,ne)]),e("td",ie,r(_(t.dateFiled)),1),e("td",le,[e("span",{class:"block max-w-[160px] truncate",title:n(t.natureOfRequest)},r(n(t.natureOfRequest,"Unspecified")),9,de)]),e("td",ce,[e("span",{class:"block max-w-[220px] truncate",title:n(t.requestDescription)},r(n(t.requestDescription)),9,pe)]),e("td",ue,[e("span",{class:f([l(w),l(F)(t.status)]),title:d(t.status)},r(d(t.status)),11,me)]),e("td",fe,[e("span",{class:f([l(w),l(O)(t.category)]),title:d(t.category)},r(d(t.category)),11,xe)]),e("td",be,[t.hasQrCode&&t.qrCodeNumber?(a(),i("span",{key:0,class:"font-mono text-[11px]",title:t.qrCodeNumber},r(t.qrCodeNumber),9,he)):(a(),i("span",ge,"No QR code"))]),e("td",ye,[C(t)?(a(),A(l(k),{key:0,href:C(t)||"",class:"inline-flex h-6 w-6 items-center justify-center rounded border border-border text-primary transition hover:bg-muted focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-ring dark:border-white/20 dark:hover:bg-white/10",title:"View request"},{default:h(()=>[p(x,{name:"moreHorizontal",class:"h-3.5 w-3.5"})]),_:1},8,["href"])):(a(),i("span",_e,[p(x,{name:"moreHorizontal",class:"h-3.5 w-3.5"})]))])]))),128)),m.value.length===0?(a(),i("tr",ke,[...s[4]||(s[4]=[e("td",{colspan:"11",class:"px-4 py-10 text-center text-xs text-muted-foreground"}," No requests match your search yet. ",-1)])])):S("",!0)])])])])])):(a(),i("div",we,[e("div",ve,[e("div",null,[e("p",Ne,r(g.value),1),e("h1",Re,r(g.value),1),s[6]||(s[6]=e("p",{class:"text-sm text-muted-foreground"}," Track incoming service requests in a clean, readable list. ",-1))]),e("div",Ce,[p(l(k),{href:"/requests/archive",class:"inline-flex w-fit items-center gap-1.5 rounded-full border border-sidebar-border/70 bg-background px-4 py-2 text-sm font-medium text-foreground shadow-sm transition hover:bg-muted/30 focus:border-primary/50 focus:outline-none focus:ring-2 focus:ring-primary/15"},{default:h(()=>[p(x,{name:"archive",class:"h-4 w-4"}),s[7]||(s[7]=N(" Archive ",-1))]),_:1}),e("label",Be,[s[8]||(s[8]=e("span",{class:"sr-only"},"Search Request Here",-1)),B(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>b.value=t),type:"search",placeholder:"Search Request Here",class:"h-9 w-full rounded-full border border-sidebar-border/70 bg-background px-4 pr-10 text-sm text-foreground shadow-sm transition focus:border-primary/50 focus:outline-none focus:ring-2 focus:ring-primary/15"},null,512),[[T,b.value]]),p(x,{name:"search",class:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground"})]),e("p",Te," Showing "+r(m.value.length)+" of "+r(c.requests.length)+" active requests (most recent 20). ",1)])]),e("div",Se,[e("div",De,[e("table",Ae,[s[10]||(s[10]=e("thead",{class:"sticky top-0 z-10 border-b border-sidebar-border/70 bg-background/95 text-xs uppercase tracking-wide text-muted-foreground backdrop-blur"},[e("tr",null,[e("th",{class:"px-3 py-3 text-left font-semibold"}," Control Ticket No. "),e("th",{class:"px-3 py-3 text-left font-semibold"}," Requested By "),e("th",{class:"px-3 py-3 text-left font-semibold"},"Office"),e("th",{class:"px-3 py-3 text-left font-semibold"},"Date Filed"),e("th",{class:"px-3 py-3 text-left font-semibold"}," Nature of Request "),e("th",{class:"px-3 py-3 text-left font-semibold"},"Remarks"),e("th",{class:"px-3 py-3 text-left font-semibold"}," Assigned IT Staff "),e("th",{class:"px-3 py-3 text-left font-semibold"},"Status"),e("th",{class:"px-3 py-3 text-left font-semibold"},"Category"),e("th",{class:"px-3 py-3 text-left font-semibold"},"QR Code"),e("th",{class:"px-3 py-3 text-left font-semibold"}," Est. Completion ")])],-1)),e("tbody",Fe,[(a(!0),i(R,null,D(m.value,t=>(a(),i("tr",{key:t.id,class:"odd:bg-muted/15 even:bg-background hover:bg-muted/30"},[e("td",Oe,[t.showUrl?(a(),A(l(k),{key:0,href:t.showUrl,class:"text-primary transition hover:text-primary/80"},{default:h(()=>[N(r(t.controlTicketNumber),1)]),_:2},1032,["href"])):(a(),i("span",Ue,r(t.controlTicketNumber),1))]),e("td",Qe,[e("span",{class:"block max-w-[140px] truncate",title:n(t.requestedBy)},r(n(t.requestedBy)),9,Ve)]),e("td",je,[e("span",{class:"block max-w-[140px] truncate",title:n(t.office)},r(n(t.office)),9,ze)]),e("td",He,r(_(t.dateFiled)),1),e("td",Ee,[e("span",{class:f([U,j(t.natureOfRequest)]),title:d(t.natureOfRequest,"Unspecified")},r(d(t.natureOfRequest,"Unspecified")),11,Le)]),e("td",$e,[e("span",{class:f([U,z(t.remarks)]),title:d(t.remarks)},r(d(t.remarks)),11,Ie)]),e("td",Me,[e("span",{class:"block max-w-[150px] truncate",title:n(t.assignedStaff)},r(n(t.assignedStaff,"Not assigned")),9,Pe)]),e("td",Ge,[e("span",{class:f([l(w),l(F)(t.status)]),title:d(t.status)},r(d(t.status)),11,Je)]),e("td",Ke,[e("span",{class:f([l(w),l(O)(t.category)]),title:d(t.category)},r(d(t.category)),11,We)]),e("td",Xe,[t.hasQrCode&&t.qrCodeNumber?(a(),i("span",{key:0,class:"font-mono text-xs",title:t.qrCodeNumber},r(t.qrCodeNumber),9,Ye)):(a(),i("span",Ze,"No QR code"))]),e("td",qe,r(_(t.estimatedCompletionDate)),1)]))),128)),m.value.length===0?(a(),i("tr",et,[...s[9]||(s[9]=[e("td",{colspan:"11",class:"px-4 py-10 text-center text-sm text-muted-foreground"}," No requests match your search yet. ",-1)])])):S("",!0)])])])])]))]),_:1},8,["breadcrumbs"])],64))}});export{mt as default};
