import{d as M,g as v,r as G,c as d,a as c,u as n,h as Q,w as g,o as i,b as e,l as w,e as R,j as T,v as C,t as r,k as S,F as B,n as D,p as f,m as O}from"./app-hprv82iD.js";import{_ as x}from"./Icon.vue_vue_type_script_setup_true_lang-6TlJXvpS.js";import{_ as P}from"./AppLayout.vue_vue_type_script_setup_true_lang-Vvll4woM.js";import{r as k,g as A,a as F}from"./requestBadges-UCv4_yyd.js";import{d as q}from"./lazy-CSzc0j1S.js";import"./upload-D7jIMjTO.js";import"./trash-2-CAvUAG6J.js";import"./camera-Bzj9lo5g.js";import"./check-Blni6uCA.js";import"./image-jeahEMNH.js";import"./sun-CrpPSP7h.js";import"./user-plus-D-75nZND.js";const J={key:0,class:"flex flex-1 flex-col bg-background p-5 sm:p-6"},K={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},W={class:"relative w-full max-w-xs"},X={class:"mt-1 text-[11px] text-muted-foreground"},Y={class:"mt-3 rounded-md border border-border bg-card shadow-sm dark:border-white/10"},Z={class:"max-h-[560px] overflow-auto"},ee={class:"w-full min-w-[980px] text-[11px] text-foreground"},te={class:"divide-y divide-border text-xs text-foreground dark:divide-white/10"},se={class:"px-3 py-2 font-medium"},oe={class:"px-3 py-2"},re=["title"],ae={class:"px-3 py-2"},ne=["title"],ie={class:"px-3 py-2"},le=["title"],de={class:"px-3 py-2 text-muted-foreground"},ce={class:"px-3 py-2"},pe=["title"],ue={class:"px-3 py-2"},me=["title"],fe={class:"px-3 py-2"},xe=["title"],be={class:"px-3 py-2"},he=["title"],ge={class:"px-3 py-2"},ye={key:1,class:"inline-flex h-6 w-6 items-center justify-center rounded border border-border text-muted-foreground dark:border-white/20"},_e={key:0},we={key:1,class:"flex flex-1 flex-col gap-5 p-6"},ke={class:"flex flex-col gap-3"},ve={class:"text-xs uppercase tracking-[0.2em] text-muted-foreground"},Re={class:"text-xl font-semibold text-foreground"},Be={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},Ne={class:"relative w-full sm:max-w-sm"},Te={class:"text-xs text-muted-foreground"},Ce={class:"rounded-2xl border border-sidebar-border/60 bg-background shadow-sm"},Se={class:"max-h-[560px] overflow-auto"},De={class:"w-full min-w-[1200px] text-sm"},Oe={class:"divide-y divide-muted/40 text-sm text-foreground"},Ae={class:"px-3 py-2 font-medium"},Fe={key:1},Ue={class:"px-3 py-2"},ze=["title"],Ve={class:"px-3 py-2"},je=["title"],He={class:"px-3 py-2 text-muted-foreground"},Ee={class:"px-3 py-2"},Ie=["title"],Le={class:"px-3 py-2"},$e=["title"],Me={class:"px-3 py-2"},Ge=["title"],Qe={class:"px-3 py-2"},Pe=["title"],qe={class:"px-3 py-2"},Je=["title"],Ke={class:"px-3 py-2 text-muted-foreground"},We={key:0},U="inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] font-medium leading-4",dt=M({__name:"Requests",props:{requests:{},isAdmin:{type:Boolean}},setup(z){const u=z,y=v(()=>u.isAdmin?"Requests":"My Requests"),V=v(()=>[{title:"Dashboard",href:q().url},{title:y.value,href:"/requests"}]),b=G(""),h=o=>(o??"").toLowerCase(),p={emerald:"border-emerald-500/30 bg-emerald-500/10 text-emerald-700 dark:text-emerald-300",blue:"border-blue-500/30 bg-blue-500/10 text-blue-700 dark:text-blue-300",amber:"border-amber-500/30 bg-amber-500/10 text-amber-700 dark:text-amber-300",purple:"border-purple-500/30 bg-purple-500/10 text-purple-700 dark:text-purple-300",slate:"border-slate-500/20 bg-slate-500/10 text-slate-600 dark:text-slate-300"},j=o=>{const s=h(o);return s.includes("password")?p.blue:s.includes("repair")?p.amber:s.includes("system")?p.purple:p.slate},H=o=>{const s=h(o);return s.includes("deliver")?p.blue:s.includes("interview")?p.purple:s.includes("remote")?p.emerald:s.includes("pick")?p.amber:p.slate},_=o=>{if(!o)return"—";const s=new Date(o);return Number.isNaN(s.getTime())?o:new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric"}).format(s)},a=(o,s="—")=>o&&o.trim().length>0?o:s,l=(o,s="Not set")=>o&&o.trim().length>0?o:s,E=["system account creation","system modification","password reset or account recovery (gov mail)","system error / bug report","request for new system module or enhancement","system development"],I=["software license or activation request","computer repair","laptop repair","printer repair","cctv issue/repair","end-user equipment installation, setup, and configuration (connection of computers, monitors, printers, peripherals, and workstation relocation)","request for new it equipment (e.g., pc, printer, ups)","install/reformat operating system","installation of application software","network connectivity installation, repair, and maintenance services (lan and fiber optic cabling, network and wireless setup, repairs, upgrades, and network equipment deployment)","end-user devices component replacement","assess extent of hardware/software failure","system reinstallation/troubleshooting (toims, gaams, ecpac)","inspect unit","borrow unit","data recovery"],L=o=>{const s=h(o);return E.some(t=>s===t)},$=o=>{const s=h(o);return I.some(t=>s===t)},N=o=>L(o.natureOfRequest)?`/requests/${o.id}/it-governance`:$(o.natureOfRequest)?`/requests/${o.id}/equipment-and-network`:o.showUrl,m=v(()=>{const o=h(b.value.trim());return o?u.isAdmin?u.requests.filter(s=>[s.controlTicketNumber,s.requestedBy].filter(Boolean).join(" ").toLowerCase().includes(o)):u.requests.filter(s=>[s.controlTicketNumber,s.natureOfRequest,s.office,s.requestedBy,s.assignedStaff,s.category,s.remarks,s.status,s.estimatedCompletionDate,_(s.dateFiled)].filter(Boolean).join(" ").toLowerCase().includes(o)):u.requests});return(o,s)=>(i(),d(B,null,[c(n(Q),{title:y.value},null,8,["title"]),c(P,{breadcrumbs:V.value},{default:g(()=>[u.isAdmin?(i(),d("div",J,[e("div",K,[c(n(w),{href:"/requests/archive",class:"inline-flex w-fit items-center gap-1.5 rounded-md border border-border bg-background px-3 py-1.5 text-xs font-medium text-foreground shadow-sm transition hover:bg-muted dark:border-white/20 dark:hover:bg-white/10"},{default:g(()=>[c(x,{name:"archive",class:"h-3.5 w-3.5"}),s[2]||(s[2]=R(" Archive ",-1))]),_:1}),e("label",W,[s[3]||(s[3]=e("span",{class:"sr-only"},"Search Request Here",-1)),T(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>b.value=t),type:"search",placeholder:"Search Request Here",class:"h-9 w-full rounded-md border border-input bg-background px-3 pr-9 text-xs text-foreground shadow-sm transition placeholder:text-muted-foreground focus:border-ring focus:outline-none focus:ring-2 focus:ring-ring/50"},null,512),[[C,b.value]]),c(x,{name:"search",class:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground"})])]),e("p",X," Showing "+r(m.value.length)+" of "+r(u.requests.length)+" active requests (most recent 20, FIFO). ",1),e("div",Y,[e("div",Z,[e("table",ee,[s[5]||(s[5]=e("thead",{class:"border-b border-border bg-muted/50 text-[11px] uppercase text-foreground dark:border-white/10 dark:bg-white/5"},[e("tr",null,[e("th",{colspan:"10",class:"px-3 py-2 text-center text-xs font-semibold"}," REQUEST FORM ")]),e("tr",{class:"border-t border-border dark:border-white/10"},[e("th",{class:"px-3 py-2 text-left font-semibold"},"Control Ticket No."),e("th",{class:"px-3 py-2 text-left font-semibold"},"Requested By"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Position/Designation"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Office"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Date Filed"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Nature of Request"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Request Description"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Status"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Category"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Action")])],-1)),e("tbody",te,[(i(!0),d(B,null,D(m.value,t=>(i(),d("tr",{key:t.id,class:"odd:bg-background even:bg-muted/20 hover:bg-muted/40 dark:even:bg-white/5 dark:hover:bg-white/10"},[e("td",se,r(t.controlTicketNumber),1),e("td",oe,[e("span",{class:"block max-w-[140px] truncate",title:a(t.requestedBy)},r(a(t.requestedBy)),9,re)]),e("td",ae,[e("span",{class:"block max-w-[140px] truncate",title:a(t.positionTitle)},r(a(t.positionTitle)),9,ne)]),e("td",ie,[e("span",{class:"block max-w-[140px] truncate",title:a(t.office)},r(a(t.office)),9,le)]),e("td",de,r(_(t.dateFiled)),1),e("td",ce,[e("span",{class:"block max-w-[160px] truncate",title:a(t.natureOfRequest)},r(a(t.natureOfRequest,"Unspecified")),9,pe)]),e("td",ue,[e("span",{class:"block max-w-[220px] truncate",title:a(t.requestDescription)},r(a(t.requestDescription)),9,me)]),e("td",fe,[e("span",{class:f([n(k),n(A)(t.status)]),title:l(t.status)},r(l(t.status)),11,xe)]),e("td",be,[e("span",{class:f([n(k),n(F)(t.category)]),title:l(t.category)},r(l(t.category)),11,he)]),e("td",ge,[N(t)?(i(),O(n(w),{key:0,href:N(t)||"",class:"inline-flex h-6 w-6 items-center justify-center rounded border border-border text-primary transition hover:bg-muted focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-ring dark:border-white/20 dark:hover:bg-white/10",title:"View request"},{default:g(()=>[c(x,{name:"moreHorizontal",class:"h-3.5 w-3.5"})]),_:1},8,["href"])):(i(),d("span",ye,[c(x,{name:"moreHorizontal",class:"h-3.5 w-3.5"})]))])]))),128)),m.value.length===0?(i(),d("tr",_e,[...s[4]||(s[4]=[e("td",{colspan:"10",class:"px-4 py-10 text-center text-xs text-muted-foreground"}," No requests match your search yet. ",-1)])])):S("",!0)])])])])])):(i(),d("div",we,[e("div",ke,[e("div",null,[e("p",ve,r(y.value),1),e("h1",Re,r(y.value),1),s[6]||(s[6]=e("p",{class:"text-sm text-muted-foreground"}," Track incoming service requests in a clean, readable list. ",-1))]),e("div",Be,[c(n(w),{href:"/requests/archive",class:"inline-flex w-fit items-center gap-1.5 rounded-full border border-sidebar-border/70 bg-background px-4 py-2 text-sm font-medium text-foreground shadow-sm transition hover:bg-muted/30 focus:border-primary/50 focus:outline-none focus:ring-2 focus:ring-primary/15"},{default:g(()=>[c(x,{name:"archive",class:"h-4 w-4"}),s[7]||(s[7]=R(" Archive ",-1))]),_:1}),e("label",Ne,[s[8]||(s[8]=e("span",{class:"sr-only"},"Search Request Here",-1)),T(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>b.value=t),type:"search",placeholder:"Search Request Here",class:"h-9 w-full rounded-full border border-sidebar-border/70 bg-background px-4 pr-10 text-sm text-foreground shadow-sm transition focus:border-primary/50 focus:outline-none focus:ring-2 focus:ring-primary/15"},null,512),[[C,b.value]]),c(x,{name:"search",class:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground"})]),e("p",Te," Showing "+r(m.value.length)+" of "+r(u.requests.length)+" active requests (most recent 20). ",1)])]),e("div",Ce,[e("div",Se,[e("table",De,[s[10]||(s[10]=e("thead",{class:"sticky top-0 z-10 border-b border-sidebar-border/70 bg-background/95 text-xs uppercase tracking-wide text-muted-foreground backdrop-blur"},[e("tr",null,[e("th",{class:"px-3 py-3 text-left font-semibold"}," Control Ticket No. "),e("th",{class:"px-3 py-3 text-left font-semibold"}," Requested By "),e("th",{class:"px-3 py-3 text-left font-semibold"},"Office"),e("th",{class:"px-3 py-3 text-left font-semibold"},"Date Filed"),e("th",{class:"px-3 py-3 text-left font-semibold"}," Nature of Request "),e("th",{class:"px-3 py-3 text-left font-semibold"},"Remarks"),e("th",{class:"px-3 py-3 text-left font-semibold"}," Assigned IT Staff "),e("th",{class:"px-3 py-3 text-left font-semibold"},"Status"),e("th",{class:"px-3 py-3 text-left font-semibold"},"Category"),e("th",{class:"px-3 py-3 text-left font-semibold"}," Est. Completion ")])],-1)),e("tbody",Oe,[(i(!0),d(B,null,D(m.value,t=>(i(),d("tr",{key:t.id,class:"odd:bg-muted/15 even:bg-background hover:bg-muted/30"},[e("td",Ae,[t.showUrl?(i(),O(n(w),{key:0,href:t.showUrl,class:"text-primary transition hover:text-primary/80"},{default:g(()=>[R(r(t.controlTicketNumber),1)]),_:2},1032,["href"])):(i(),d("span",Fe,r(t.controlTicketNumber),1))]),e("td",Ue,[e("span",{class:"block max-w-[140px] truncate",title:a(t.requestedBy)},r(a(t.requestedBy)),9,ze)]),e("td",Ve,[e("span",{class:"block max-w-[140px] truncate",title:a(t.office)},r(a(t.office)),9,je)]),e("td",He,r(_(t.dateFiled)),1),e("td",Ee,[e("span",{class:f([U,j(t.natureOfRequest)]),title:l(t.natureOfRequest,"Unspecified")},r(l(t.natureOfRequest,"Unspecified")),11,Ie)]),e("td",Le,[e("span",{class:f([U,H(t.remarks)]),title:l(t.remarks)},r(l(t.remarks)),11,$e)]),e("td",Me,[e("span",{class:"block max-w-[150px] truncate",title:a(t.assignedStaff)},r(a(t.assignedStaff,"Not assigned")),9,Ge)]),e("td",Qe,[e("span",{class:f([n(k),n(A)(t.status)]),title:l(t.status)},r(l(t.status)),11,Pe)]),e("td",qe,[e("span",{class:f([n(k),n(F)(t.category)]),title:l(t.category)},r(l(t.category)),11,Je)]),e("td",Ke,r(_(t.estimatedCompletionDate)),1)]))),128)),m.value.length===0?(i(),d("tr",We,[...s[9]||(s[9]=[e("td",{colspan:"10",class:"px-4 py-10 text-center text-sm text-muted-foreground"}," No requests match your search yet. ",-1)])])):S("",!0)])])])])]))]),_:1},8,["breadcrumbs"])],64))}});export{dt as default};
