import{d as T,B as q,g as h,G as S,f as u,c as n,a as A,u as z,h as I,w as P,b as e,k as m,o as l,e as $,t as d,F as k,n as D,j as L,v as V,p as O,s as E}from"./app-BagFaS7S.js";import{_ as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-Dms2dTVy.js";import{d as H}from"./lazy-CSzc0j1S.js";const J={class:"flex flex-1 flex-col gap-6 p-6"},Q={class:"rounded-3xl border border-sidebar-border/60 bg-background p-6"},W={key:0,class:"mt-4 flex items-center gap-3 rounded-xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-800 dark:border-emerald-500/30 dark:bg-emerald-500/15 dark:text-emerald-200",role:"status"},X={key:1,class:"mt-4 flex items-center gap-3 rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-800 dark:border-rose-500/30 dark:bg-rose-500/15 dark:text-rose-200",role:"alert"},Y={class:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between"},Z={class:"space-y-2"},K={class:"text-lg font-semibold"},ee={class:"text-sm text-muted-foreground"},te={class:"flex flex-wrap items-center gap-3"},se={class:"rounded-full border border-sidebar-border/60 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-muted-foreground"},re=["onUpdate:modelValue","placeholder"],oe={class:"mt-5 rounded-2xl border border-sidebar-border/60 bg-muted/10 p-5"},de={class:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between"},ae={class:"text-sm font-semibold"},ne=["onClick"],le={class:"mt-4 grid gap-4 lg:grid-cols-[1fr_auto] lg:items-end"},ie={class:"text-xs font-semibold uppercase tracking-[0.2em] text-muted-foreground"},ce=["onUpdate:modelValue","placeholder"],ue={key:0,class:"mt-2 text-xs text-red-500"},me=["disabled","onClick"],fe={class:"mt-6"},be={key:0,class:"rounded-2xl border border-dashed border-sidebar-border/70 p-6 text-center text-sm text-muted-foreground"},xe={key:1,class:"overflow-hidden rounded-2xl border border-sidebar-border/60"},pe={class:"divide-y divide-sidebar-border/60"},he={class:"font-semibold"},ke={class:"text-xs text-muted-foreground"},ge={class:"text-xs text-muted-foreground"},_e={class:"flex flex-wrap justify-end gap-2"},ve=["onClick"],ye=["onClick"],Ce=["onClick"],De=T({__name:"Index",props:{groups:{}},setup(N){const f=N,g=q(),_=h(()=>g.props.flash?.status??null),v=h(()=>g.props.flash?.error??null),U=[{title:"Dashboard",href:H().url},{title:"Status Management",href:"/admin/status"}],b=[{key:"status",title:"Status",description:"Control the lifecycle labels used across request tracking.",placeholder:"Pending, Ongoing, Completed",emptyLabel:"No statuses match this search."},{key:"category",title:"Category",description:"Define asset categories that appear in ticket enrollments.",placeholder:"Simple, Complex, Urgent",emptyLabel:"No categories match this search."},{key:"officeDesignation",title:"Office Designation",description:"Set the office or division identifiers used in assignments.",placeholder:"Add office or division",emptyLabel:"No office designations match this search."},{key:"remarks",title:"Remarks",description:"Standardize commonly used remarks for requests.",placeholder:"For Pickup, To Deliver, Remote",emptyLabel:"No remarks match this search."}],x=S({status:"",category:"",officeDesignation:"",remarks:""}),i=S({status:null,category:null,officeDesignation:null,remarks:null}),a={status:u({name:"",is_active:!0,group_key:"status"}),category:u({name:"",is_active:!0,group_key:"category"}),officeDesignation:u({name:"",is_active:!0,group_key:"office_designation"}),remarks:u({name:"",is_active:!0,group_key:"remarks"})},w=h(()=>b.reduce((s,t)=>({...s,[t.key]:f.groups[t.key].length}),{}));function y(s){const t=x[s].trim().toLowerCase();return t?f.groups[s].filter(r=>r.name.toLowerCase().includes(t)):f.groups[s]}function p(s){return i[s]!==null}function c(s){i[s]=null,a[s].reset(),a[s].clearErrors()}function R(s,t){i[s]=t.id,a[s].name=t.name,a[s].is_active=t.isActive,a[s].clearErrors()}function F(s){const t=a[s],r=i[s];if(r){t.patch(`/admin/status/${r}`,{preserveScroll:!0,onSuccess:()=>c(s)});return}t.post("/admin/status",{preserveScroll:!0,onSuccess:()=>c(s)})}function j(s,t){confirm(`Remove "${t.name}" from ${M(s)}?`)&&E.delete(`/admin/status/${t.id}`,{preserveScroll:!0,onSuccess:()=>{i[s]===t.id&&c(s)}})}function B(s,t){E.patch(`/admin/status/${t.id}`,{name:t.name,is_active:!0},{preserveScroll:!0,onSuccess:()=>{i[s]===t.id&&c(s)}})}function M(s){return b.find(t=>t.key===s)?.title??"this group"}return(s,t)=>(l(),n(k,null,[A(z(I),{title:"Status Management"}),A(G,{breadcrumbs:U},{default:P(()=>[e("div",J,[e("section",Q,[t[2]||(t[2]=e("div",{class:"space-y-2"},[e("p",{class:"text-xs uppercase tracking-[0.3em] text-muted-foreground"}," Administration "),e("h1",{class:"text-2xl font-semibold"},"Status Management"),e("p",{class:"text-sm text-muted-foreground"}," Centralize the status, category, office designation, and remark options used throughout the platform. ")],-1)),_.value?(l(),n("div",W,[t[0]||(t[0]=e("span",{class:"h-2 w-2 shrink-0 rounded-full bg-emerald-500"},null,-1)),$(" "+d(_.value),1)])):m("",!0),v.value?(l(),n("div",X,[t[1]||(t[1]=e("span",{class:"h-2 w-2 shrink-0 rounded-full bg-rose-500"},null,-1)),$(" "+d(v.value),1)])):m("",!0)]),(l(),n(k,null,D(b,r=>e("section",{key:r.key,class:"rounded-3xl border border-sidebar-border/60 bg-background p-6"},[e("div",Y,[e("div",Z,[e("h2",K,d(r.title),1),e("p",ee,d(r.description),1)]),e("div",te,[e("div",se," Total: "+d(w.value[r.key]??0),1),L(e("input",{"onUpdate:modelValue":o=>x[r.key]=o,type:"search",placeholder:`Search ${r.title.toLowerCase()}...`,class:"h-10 w-64 rounded-full border border-sidebar-border/70 bg-background px-4 text-sm"},null,8,re),[[V,x[r.key]]])])]),e("div",oe,[e("div",de,[e("div",null,[e("h3",ae,d(p(r.key)?"Edit value":"Add a value"),1),t[3]||(t[3]=e("p",{class:"text-xs text-muted-foreground"}," Updates instantly refresh the linked workflows and reports. ",-1))]),p(r.key)?(l(),n("button",{key:0,type:"button",class:"rounded-full border border-sidebar-border/70 px-4 py-2 text-xs font-semibold text-muted-foreground transition-colors hover:bg-muted/40",onClick:o=>c(r.key)}," Cancel editing ",8,ne)):m("",!0)]),e("div",le,[e("div",null,[e("label",ie,d(r.title)+" value ",1),L(e("input",{"onUpdate:modelValue":o=>a[r.key].name=o,type:"text",class:"mt-2 w-full rounded-xl border border-sidebar-border/70 bg-background px-3 py-2 text-sm",placeholder:r.placeholder},null,8,ce),[[V,a[r.key].name]]),a[r.key].errors.name?(l(),n("p",ue,d(a[r.key].errors.name),1)):m("",!0)]),e("button",{type:"button",class:"h-10 rounded-full bg-[#2563eb] px-6 text-sm font-semibold text-white transition-colors hover:bg-[#1d4ed8] disabled:cursor-not-allowed disabled:opacity-60",disabled:a[r.key].processing||!a[r.key].name.trim(),onClick:o=>F(r.key)},d(p(r.key)?"Save changes":"Add value"),9,me)])]),e("div",fe,[y(r.key).length?(l(),n("div",xe,[t[4]||(t[4]=e("div",{class:"hidden grid-cols-[1.6fr_0.5fr_0.5fr_0.7fr] gap-4 border-b border-sidebar-border/60 bg-muted/30 px-4 py-3 text-xs font-semibold uppercase tracking-[0.2em] text-muted-foreground md:grid"},[e("span",null,"Value"),e("span",null,"Status"),e("span",null,"Usage"),e("span",{class:"text-right"},"Actions")],-1)),e("div",pe,[(l(!0),n(k,null,D(y(r.key),o=>(l(),n("div",{key:o.id,class:"flex flex-col gap-3 px-4 py-4 text-sm md:grid md:grid-cols-[1.6fr_0.5fr_0.5fr_0.7fr] md:items-center md:gap-4"},[e("div",null,[e("p",he,d(o.name),1),e("p",ke," Updated "+d(o.updatedAt?o.updatedAt:"â€”"),1)]),e("span",{class:O(["inline-flex w-fit items-center rounded-full px-2 py-1 text-xs font-semibold",o.isActive?"bg-emerald-100 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200":"bg-rose-100 text-rose-700 dark:bg-rose-500/20 dark:text-rose-200"])},d(o.isActive?"Active":"Removed"),3),e("span",ge,d(o.usageCount)+" linked ",1),e("div",_e,[e("button",{type:"button",class:"rounded-full border border-sidebar-border/70 px-3 py-1.5 text-xs font-semibold text-muted-foreground transition-colors hover:bg-muted/40",onClick:C=>R(r.key,o)}," Edit ",8,ve),o.isActive?(l(),n("button",{key:0,type:"button",class:"rounded-full border border-rose-200 px-3 py-1.5 text-xs font-semibold text-rose-600 transition-colors hover:bg-rose-50 dark:border-rose-500/40 dark:hover:bg-rose-500/10",onClick:C=>j(r.key,o)}," Remove ",8,ye)):(l(),n("button",{key:1,type:"button",class:"rounded-full border border-sidebar-border/70 px-3 py-1.5 text-xs font-semibold text-muted-foreground transition-colors hover:bg-muted/40",onClick:C=>B(r.key,o)}," Restore ",8,Ce))])]))),128))])])):(l(),n("div",be,d(r.emptyLabel),1))])])),64))])]),_:1})],64))}});export{De as default};
