import{d as S,r as q,g as B,z as V,A as $,I as j,c as o,a,u as x,h as D,w as f,b as e,l as w,e as p,t as s,k as C,j as P,v as R,p as u,o as d,F as g,n as I,x as U}from"./app-BKeQIzJd.js";import{_ as F}from"./AppLayout.vue_vue_type_script_setup_true_lang-D4ZJz0Dy.js";import{d as E}from"./lazy-CSzc0j1S.js";const M={class:"flex flex-1 flex-col gap-6 p-6"},z={class:"rounded-3xl border border-sidebar-border/60 bg-background p-6"},K={class:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between"},L={class:"flex flex-wrap gap-3"},O={class:"grid gap-4 lg:grid-cols-2 xl:grid-cols-4"},G={class:"rounded-2xl border border-sidebar-border/60 bg-background p-5"},H={class:"mt-4 text-3xl font-semibold"},J={class:"rounded-2xl border border-sidebar-border/60 bg-background p-5"},Q={class:"mt-4 text-3xl font-semibold"},W={class:"rounded-2xl border border-sidebar-border/60 bg-background p-5"},X={class:"mt-4 text-3xl font-semibold"},Y={class:"rounded-2xl border border-sidebar-border/60 bg-background p-5"},Z={class:"mt-4 text-3xl font-semibold"},ee={class:"rounded-3xl border border-sidebar-border/60 bg-background p-6"},te={class:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between"},re={class:"flex flex-col gap-3 sm:flex-row sm:items-center"},se={class:"relative"},oe={class:"flex flex-wrap gap-2"},de={key:0,class:"text-xs text-muted-foreground"},ne={key:1,class:"text-xs text-muted-foreground"},le={key:0,class:"mt-6 overflow-hidden rounded-2xl border border-sidebar-border/60"},ie={key:0,class:"rounded-2xl border border-dashed border-sidebar-border/70 p-8 text-center text-sm text-muted-foreground"},ae={class:"divide-y divide-sidebar-border/60"},ue={class:"font-semibold"},be={class:"text-muted-foreground"},ce={class:"text-muted-foreground"},me={class:"inline-flex items-center rounded-full px-2 py-1 text-xs font-semibold bg-blue-100 text-blue-700 dark:bg-blue-500/20 dark:text-blue-200"},xe={class:"flex justify-end"},fe={key:1,class:"mt-6 rounded-2xl border border-dashed border-sidebar-border/70 p-8 text-center text-sm text-muted-foreground"},pe={key:2,class:"mt-6 overflow-hidden rounded-2xl border border-sidebar-border/60"},ge={class:"divide-y divide-sidebar-border/60"},ve={class:"font-semibold"},he={class:"text-xs text-muted-foreground"},we={key:0},ye={class:"text-xs font-semibold tracking-[0.2em] text-muted-foreground"},ke={class:"flex justify-end"},_e=45e3,Ae=S({__name:"Inventory",props:{items:{},borrowedRequests:{},filters:{},counts:{}},setup(n){const y=n,A=[{title:"Dashboard",href:E().url},{title:"Inventory",href:"/inventory"}],b=q(y.filters.search??""),l=q(y.filters.status??"all"),N=B(()=>b.value.trim().length>0||l.value!=="all");let v=null;function h(){U.get("/inventory",{search:b.value.trim(),status:l.value},{preserveState:!0,replace:!0})}function T(){v&&window.clearTimeout(v),v=window.setTimeout(()=>{h()},300)}function c(m){l.value=m,h()}let i=null;function k(){i||(i=window.setInterval(()=>{h()},_e))}function _(){i&&(window.clearInterval(i),i=null)}return V(()=>{l.value==="borrowed"&&k()}),$(()=>{_()}),j(l,m=>{m==="borrowed"?k():_()}),(m,t)=>(d(),o(g,null,[a(x(D),{title:"Inventory"}),a(F,{breadcrumbs:A},{default:f(()=>[e("div",M,[e("section",z,[e("div",K,[t[6]||(t[6]=e("div",{class:"space-y-2"},[e("p",{class:"text-xs uppercase tracking-[0.3em] text-muted-foreground"}," Inventory "),e("h1",{class:"text-2xl font-semibold"},"Inventory registry"),e("p",{class:"text-sm text-muted-foreground"}," Track registered equipment and archived assets in one consolidated view. ")],-1)),e("div",L,[a(x(w),{href:"/admin/enrollments/create",class:"rounded-full bg-[#0f172a] px-4 py-2 text-sm font-semibold text-white transition-colors hover:bg-[#1e293b]"},{default:f(()=>[...t[5]||(t[5]=[p(" Enroll new item ",-1)])]),_:1})])])]),e("section",O,[e("div",G,[t[7]||(t[7]=e("p",{class:"text-xs uppercase tracking-[0.2em] text-muted-foreground"}," Active assets ",-1)),e("p",H,s(n.counts.active),1),t[8]||(t[8]=e("p",{class:"mt-2 text-sm text-muted-foreground"}," Currently operational in inventory. ",-1))]),e("div",J,[t[9]||(t[9]=e("p",{class:"text-xs uppercase tracking-[0.2em] text-muted-foreground"}," Archived ",-1)),e("p",Q,s(n.counts.archived),1),t[10]||(t[10]=e("p",{class:"mt-2 text-sm text-muted-foreground"}," Deactivated or retired equipment. ",-1))]),e("div",W,[t[11]||(t[11]=e("p",{class:"text-xs uppercase tracking-[0.2em] text-muted-foreground"}," Borrowed ",-1)),e("p",X,s(n.counts.borrowed),1),t[12]||(t[12]=e("p",{class:"mt-2 text-sm text-muted-foreground"}," Pending borrow requests. Completed requests are removed. ",-1))]),e("div",Y,[t[13]||(t[13]=e("p",{class:"text-xs uppercase tracking-[0.2em] text-muted-foreground"}," Total registry ",-1)),e("p",Z,s(n.counts.active+n.counts.archived),1),t[14]||(t[14]=e("p",{class:"mt-2 text-sm text-muted-foreground"}," All items registered in the system. ",-1))])]),e("section",ee,[e("div",te,[e("div",re,[e("div",se,[P(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>b.value=r),type:"text",class:"w-full rounded-full border border-sidebar-border/70 bg-background px-4 py-2.5 text-sm",placeholder:"Search by equipment name",onInput:T},null,544),[[R,b.value]])]),e("div",oe,[e("button",{type:"button",class:u(["rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-[0.2em] transition",l.value==="all"?"border-transparent bg-[#0f172a] text-white":"border-sidebar-border/70 text-muted-foreground hover:bg-muted/40"]),onClick:t[1]||(t[1]=r=>c("all"))}," All ",2),e("button",{type:"button",class:u(["rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-[0.2em] transition",l.value==="active"?"border-transparent bg-emerald-600 text-white":"border-sidebar-border/70 text-muted-foreground hover:bg-muted/40"]),onClick:t[2]||(t[2]=r=>c("active"))}," Active ",2),e("button",{type:"button",class:u(["rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-[0.2em] transition",l.value==="archived"?"border-transparent bg-amber-600 text-white":"border-sidebar-border/70 text-muted-foreground hover:bg-muted/40"]),onClick:t[3]||(t[3]=r=>c("archived"))}," Archived ",2),e("button",{type:"button",class:u(["rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-[0.2em] transition",l.value==="borrowed"?"border-transparent bg-blue-600 text-white":"border-sidebar-border/70 text-muted-foreground hover:bg-muted/40"]),onClick:t[4]||(t[4]=r=>c("borrowed"))}," Borrowed ",2)])]),N.value&&l.value!=="borrowed"?(d(),o("p",de," Showing "+s(n.items.length)+" result(s) for current filters. ",1)):l.value==="borrowed"?(d(),o("p",ne,s(n.borrowedRequests.length)+" active borrow request(s). Completed requests are removed from this list. ",1)):C("",!0)]),l.value==="borrowed"?(d(),o("div",le,[n.borrowedRequests.length?(d(),o(g,{key:1},[t[16]||(t[16]=e("div",{class:"hidden grid-cols-[1fr_1fr_0.8fr_0.6fr_0.6fr] gap-4 border-b border-sidebar-border/60 bg-muted/30 px-4 py-3 text-xs font-semibold uppercase tracking-[0.2em] text-muted-foreground md:grid"},[e("span",null,"Control ticket"),e("span",null,"Requester"),e("span",null,"Office"),e("span",null,"Status"),e("span",{class:"text-right"},"Actions")],-1)),e("div",ae,[(d(!0),o(g,null,I(n.borrowedRequests,r=>(d(),o("div",{key:r.id,class:"flex flex-col gap-3 px-4 py-4 text-sm md:grid md:grid-cols-[1fr_1fr_0.8fr_0.6fr_0.6fr] md:items-center md:gap-4"},[e("p",ue,s(r.controlTicketNumber),1),e("p",be,s(r.requesterName??"—"),1),e("p",ce,s(r.office??"—"),1),e("span",me,s(r.status??"—"),1),e("div",xe,[a(x(w),{href:r.showUrl,class:"rounded-full border border-sidebar-border/70 px-3 py-1.5 text-xs font-semibold text-muted-foreground transition-colors hover:bg-muted/40"},{default:f(()=>[...t[15]||(t[15]=[p(" View ",-1)])]),_:1},8,["href"])])]))),128))])],64)):(d(),o("div",ie," No active borrow requests. Completed borrows are removed from this list. "))])):n.items.length?(d(),o("div",pe,[t[18]||(t[18]=e("div",{class:"hidden grid-cols-[1.2fr_0.8fr_0.6fr_0.6fr] gap-4 border-b border-sidebar-border/60 bg-muted/30 px-4 py-3 text-xs font-semibold uppercase tracking-[0.2em] text-muted-foreground md:grid"},[e("span",null,"Equipment"),e("span",null,"Unique ID"),e("span",null,"Status"),e("span",{class:"text-right"},"Actions")],-1)),e("div",ge,[(d(!0),o(g,null,I(n.items,r=>(d(),o("div",{key:r.rowKey,class:"flex flex-col gap-3 px-4 py-4 text-sm md:grid md:grid-cols-[1.2fr_0.8fr_0.6fr_0.6fr] md:items-center md:gap-4"},[e("div",null,[e("p",ve,s(r.equipmentName),1),e("p",he,[p(s(r.brand||"Unspecified brand")+" ",1),r.model?(d(),o("span",we," • "+s(r.model),1)):C("",!0)])]),e("p",ye,s(r.uniqueId),1),e("span",{class:u(["inline-flex items-center rounded-full px-2 py-1 text-xs font-semibold",r.status==="active"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200":"bg-amber-100 text-amber-700 dark:bg-amber-500/20 dark:text-amber-200"])},s(r.status==="active"?"Active":"Archived"),3),e("div",ke,[a(x(w),{href:`/inventory/${r.uniqueId}`,class:"rounded-full border border-sidebar-border/70 px-3 py-1.5 text-xs font-semibold text-muted-foreground transition-colors hover:bg-muted/40"},{default:f(()=>[...t[17]||(t[17]=[p(" View ",-1)])]),_:1},8,["href"])])]))),128))])])):(d(),o("div",fe," No inventory records match your filters. "))])])]),_:1})],64))}});export{Ae as default};
