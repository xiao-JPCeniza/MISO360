import{d as Q,g as B,r as P,c as d,a as c,u as n,h as J,w as h,o as i,b as e,l as y,e as N,j as S,v as A,t as r,k as D,F as T,n as O,p as m,m as U}from"./app-BagFaS7S.js";import{_ as f}from"./Icon.vue_vue_type_script_setup_true_lang-Cqxbs0z2.js";import{_ as K}from"./AppLayout.vue_vue_type_script_setup_true_lang-Dms2dTVy.js";import{r as _,g as F,a as V}from"./requestBadges-UCv4_yyd.js";import{d as W}from"./lazy-CSzc0j1S.js";import"./upload-_jAmcjGt.js";import"./trash-2-YkfOFHra.js";import"./camera-CrV42jB7.js";import"./check-DetQ7ooL.js";import"./image-9l0CONgu.js";import"./sun-JDzYGqRw.js";import"./user-plus-xf1ia1Yr.js";const X={key:0,class:"flex flex-1 flex-col bg-background p-5 sm:p-6"},Y={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},Z={class:"relative w-full max-w-xs"},ee={class:"mt-1 text-[11px] text-muted-foreground"},te={class:"mt-3 rounded-md border border-border bg-card shadow-sm dark:border-white/10"},se={class:"max-h-[560px] overflow-auto"},oe={class:"w-full min-w-[980px] text-[11px] text-foreground"},re={class:"divide-y divide-border text-xs text-foreground dark:divide-white/10"},ae={class:"px-3 py-2 font-medium"},ne={class:"px-3 py-2"},ie=["title"],le={class:"px-3 py-2"},de=["title"],ce={class:"px-3 py-2"},pe=["title"],ue={class:"px-3 py-2 text-muted-foreground"},me={class:"px-3 py-2"},fe=["title"],xe={class:"px-3 py-2"},be=["title"],he={class:"px-3 py-2"},ge=["title"],ye={class:"px-3 py-2"},_e=["title"],we={class:"px-3 py-2"},ke={key:1,class:"inline-flex h-6 w-6 items-center justify-center rounded border border-border text-muted-foreground dark:border-white/20"},ve={key:0},Re={key:1,class:"flex flex-1 flex-col gap-5 p-6"},Be={class:"flex flex-col gap-3"},Ne={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},Te={class:"text-xs uppercase tracking-[0.2em] text-muted-foreground"},Ce={class:"text-xl font-semibold text-foreground"},Se={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},Ae={class:"relative w-full sm:max-w-sm"},De={class:"text-xs text-muted-foreground"},Oe={class:"rounded-2xl border border-sidebar-border/60 bg-background shadow-sm"},Ue={class:"max-h-[560px] overflow-auto"},Fe={class:"w-full min-w-[1200px] text-sm"},Ve={class:"divide-y divide-muted/40 text-sm text-foreground"},je={class:"px-3 py-2 font-medium"},ze={key:1},He={class:"px-3 py-2"},Ee=["title"],Le={class:"px-3 py-2"},qe=["title"],Ie={class:"px-3 py-2 text-muted-foreground"},Me={class:"px-3 py-2"},$e=["title"],Ge={class:"px-3 py-2"},Qe=["title"],Pe={class:"px-3 py-2"},Je=["title"],Ke={class:"px-3 py-2"},We=["title"],Xe={class:"px-3 py-2"},Ye=["title"],Ze={class:"px-3 py-2 text-muted-foreground"},et={key:0},j="inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] font-medium leading-4",mt=Q({__name:"Archive",props:{requests:{},isAdmin:{type:Boolean}},setup(z){const p=z,w=B(()=>p.isAdmin?"Archived Requests":"My Archived Requests"),H=B(()=>[{title:"Dashboard",href:W().url},{title:p.isAdmin?"Requests":"My Requests",href:"/requests"},{title:"Archive",href:"/requests/archive"}]),x=P(""),b=o=>(o??"").toLowerCase(),E=o=>{const s=b(o),t="border-blue-500/30 bg-blue-500/10 text-blue-700 dark:text-blue-300",k="border-amber-500/30 bg-amber-500/10 text-amber-700 dark:text-amber-300",v="border-purple-500/30 bg-purple-500/10 text-purple-700 dark:text-purple-300",R="border-slate-500/20 bg-slate-500/10 text-slate-600 dark:text-slate-300";return s.includes("password")?t:s.includes("repair")?k:s.includes("system")?v:R},L=o=>{const s=b(o),t="border-blue-500/30 bg-blue-500/10 text-blue-700 dark:text-blue-300",k="border-purple-500/30 bg-purple-500/10 text-purple-700 dark:text-purple-300",v="border-emerald-500/30 bg-emerald-500/10 text-emerald-700 dark:text-emerald-300",R="border-amber-500/30 bg-amber-500/10 text-amber-700 dark:text-amber-300",G="border-slate-500/20 bg-slate-500/10 text-slate-600 dark:text-slate-300";return s.includes("deliver")?t:s.includes("interview")?k:s.includes("remote")?v:s.includes("pick")?R:G},g=o=>{if(!o)return"—";const s=new Date(o);return Number.isNaN(s.getTime())?o:new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric"}).format(s)},a=(o,s="—")=>o&&o.trim().length>0?o:s,l=(o,s="Not set")=>o&&o.trim().length>0?o:s,q=["system account creation","system modification","password reset or account recovery (gov mail)","system error / bug report","request for new system module or enhancement","system development"],I=["software license or activation request","computer repair","laptop repair","printer repair","cctv issue/repair","end-user equipment installation, setup, and configuration (connection of computers, monitors, printers, peripherals, and workstation relocation)","request for new it equipment (e.g., pc, printer, ups)","install/reformat operating system","installation of application software","network connectivity installation, repair, and maintenance services (lan and fiber optic cabling, network and wireless setup, repairs, upgrades, and network equipment deployment)","end-user devices component replacement","assess extent of hardware/software failure","system reinstallation/troubleshooting (toims, gaams, ecpac)","inspect unit","borrow unit","data recovery"],M=o=>{const s=b(o);return q.some(t=>s===t)},$=o=>{const s=b(o);return I.some(t=>s===t)},C=o=>M(o.natureOfRequest)?`/requests/${o.id}/it-governance`:$(o.natureOfRequest)?`/requests/${o.id}/equipment-and-network`:o.showUrl,u=B(()=>{const o=b(x.value.trim());return o?p.isAdmin?p.requests.filter(s=>[s.controlTicketNumber,s.requestedBy].filter(Boolean).join(" ").toLowerCase().includes(o)):p.requests.filter(s=>[s.controlTicketNumber,s.natureOfRequest,s.office,s.requestedBy,s.assignedStaff,s.category,s.remarks,s.status,s.estimatedCompletionDate,g(s.dateFiled)].filter(Boolean).join(" ").toLowerCase().includes(o)):p.requests});return(o,s)=>(i(),d(T,null,[c(n(J),{title:w.value},null,8,["title"]),c(K,{breadcrumbs:H.value},{default:h(()=>[p.isAdmin?(i(),d("div",X,[e("div",Y,[c(n(y),{href:"/requests",class:"inline-flex w-fit items-center gap-1.5 text-xs text-muted-foreground transition hover:text-foreground"},{default:h(()=>[c(f,{name:"arrowLeft",class:"h-3.5 w-3.5"}),s[2]||(s[2]=N(" Back to active requests ",-1))]),_:1}),e("label",Z,[s[3]||(s[3]=e("span",{class:"sr-only"},"Search Request Here",-1)),S(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>x.value=t),type:"search",placeholder:"Search Request Here",class:"h-9 w-full rounded-md border border-input bg-background px-3 pr-9 text-xs text-foreground shadow-sm transition placeholder:text-muted-foreground focus:border-ring focus:outline-none focus:ring-2 focus:ring-ring/50"},null,512),[[A,x.value]]),c(f,{name:"search",class:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground"})])]),e("p",ee," Showing "+r(u.value.length)+" of "+r(p.requests.length)+" archived requests ",1),e("div",te,[e("div",se,[e("table",oe,[s[5]||(s[5]=e("thead",{class:"border-b border-border bg-muted/50 text-[11px] uppercase text-foreground dark:border-white/10 dark:bg-white/5"},[e("tr",null,[e("th",{colspan:"10",class:"px-3 py-2 text-center text-xs font-semibold"}," ARCHIVED REQUEST FORM ")]),e("tr",{class:"border-t border-border dark:border-white/10"},[e("th",{class:"px-3 py-2 text-left font-semibold"},"Control Ticket No."),e("th",{class:"px-3 py-2 text-left font-semibold"},"Requested By"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Position/Designation"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Office"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Date Filed"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Nature of Request"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Request Description"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Status"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Category"),e("th",{class:"px-3 py-2 text-left font-semibold"},"Action")])],-1)),e("tbody",re,[(i(!0),d(T,null,O(u.value,t=>(i(),d("tr",{key:t.id,class:"odd:bg-background even:bg-muted/20 hover:bg-muted/40 dark:even:bg-white/5 dark:hover:bg-white/10"},[e("td",ae,r(t.controlTicketNumber),1),e("td",ne,[e("span",{class:"block max-w-[140px] truncate",title:a(t.requestedBy)},r(a(t.requestedBy)),9,ie)]),e("td",le,[e("span",{class:"block max-w-[140px] truncate",title:a(t.positionTitle)},r(a(t.positionTitle)),9,de)]),e("td",ce,[e("span",{class:"block max-w-[140px] truncate",title:a(t.office)},r(a(t.office)),9,pe)]),e("td",ue,r(g(t.dateFiled)),1),e("td",me,[e("span",{class:"block max-w-[160px] truncate",title:a(t.natureOfRequest)},r(a(t.natureOfRequest,"Unspecified")),9,fe)]),e("td",xe,[e("span",{class:"block max-w-[220px] truncate",title:a(t.requestDescription)},r(a(t.requestDescription)),9,be)]),e("td",he,[e("span",{class:m([n(_),n(F)(t.status)]),title:l(t.status)},r(l(t.status)),11,ge)]),e("td",ye,[e("span",{class:m([n(_),n(V)(t.category)]),title:l(t.category)},r(l(t.category)),11,_e)]),e("td",we,[C(t)?(i(),U(n(y),{key:0,href:C(t)||"",class:"inline-flex h-6 w-6 items-center justify-center rounded border border-border text-primary transition hover:bg-muted focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-ring dark:border-white/20 dark:hover:bg-white/10",title:"View request"},{default:h(()=>[c(f,{name:"moreHorizontal",class:"h-3.5 w-3.5"})]),_:1},8,["href"])):(i(),d("span",ke,[c(f,{name:"moreHorizontal",class:"h-3.5 w-3.5"})]))])]))),128)),u.value.length===0?(i(),d("tr",ve,[...s[4]||(s[4]=[e("td",{colspan:"10",class:"px-4 py-10 text-center text-xs text-muted-foreground"}," No archived requests match your search. ",-1)])])):D("",!0)])])])])])):(i(),d("div",Re,[e("div",Be,[e("div",Ne,[e("div",null,[e("p",Te,r(w.value),1),e("h1",Ce,r(w.value),1),s[6]||(s[6]=e("p",{class:"text-sm text-muted-foreground"}," Completed requests are archived here for review. ",-1))]),c(n(y),{href:"/requests",class:"inline-flex w-fit items-center gap-1.5 text-sm text-muted-foreground transition hover:text-foreground"},{default:h(()=>[c(f,{name:"arrowLeft",class:"h-4 w-4"}),s[7]||(s[7]=N(" Back to active requests ",-1))]),_:1})]),e("div",Se,[e("label",Ae,[s[8]||(s[8]=e("span",{class:"sr-only"},"Search Request Here",-1)),S(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>x.value=t),type:"search",placeholder:"Search Request Here",class:"h-9 w-full rounded-full border border-sidebar-border/70 bg-background px-4 pr-10 text-sm text-foreground shadow-sm transition focus:border-primary/50 focus:outline-none focus:ring-2 focus:ring-primary/15"},null,512),[[A,x.value]]),c(f,{name:"search",class:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground"})]),e("p",De," Showing "+r(u.value.length)+" of "+r(p.requests.length)+" archived requests ",1)])]),e("div",Oe,[e("div",Ue,[e("table",Fe,[s[10]||(s[10]=e("thead",{class:"sticky top-0 z-10 border-b border-sidebar-border/70 bg-background/95 text-xs uppercase tracking-wide text-muted-foreground backdrop-blur"},[e("tr",null,[e("th",{class:"px-3 py-3 text-left font-semibold"},"Control Ticket No."),e("th",{class:"px-3 py-3 text-left font-semibold"},"Requested By"),e("th",{class:"px-3 py-3 text-left font-semibold"},"Office"),e("th",{class:"px-3 py-3 text-left font-semibold"},"Date Filed"),e("th",{class:"px-3 py-3 text-left font-semibold"},"Nature of Request"),e("th",{class:"px-3 py-3 text-left font-semibold"},"Remarks"),e("th",{class:"px-3 py-3 text-left font-semibold"},"Assigned IT Staff"),e("th",{class:"px-3 py-3 text-left font-semibold"},"Status"),e("th",{class:"px-3 py-3 text-left font-semibold"},"Category"),e("th",{class:"px-3 py-3 text-left font-semibold"},"Est. Completion")])],-1)),e("tbody",Ve,[(i(!0),d(T,null,O(u.value,t=>(i(),d("tr",{key:t.id,class:"odd:bg-muted/15 even:bg-background hover:bg-muted/30"},[e("td",je,[t.showUrl?(i(),U(n(y),{key:0,href:t.showUrl,class:"text-primary transition hover:text-primary/80"},{default:h(()=>[N(r(t.controlTicketNumber),1)]),_:2},1032,["href"])):(i(),d("span",ze,r(t.controlTicketNumber),1))]),e("td",He,[e("span",{class:"block max-w-[140px] truncate",title:a(t.requestedBy)},r(a(t.requestedBy)),9,Ee)]),e("td",Le,[e("span",{class:"block max-w-[140px] truncate",title:a(t.office)},r(a(t.office)),9,qe)]),e("td",Ie,r(g(t.dateFiled)),1),e("td",Me,[e("span",{class:m([j,E(t.natureOfRequest)]),title:l(t.natureOfRequest,"Unspecified")},r(l(t.natureOfRequest,"Unspecified")),11,$e)]),e("td",Ge,[e("span",{class:m([j,L(t.remarks)]),title:l(t.remarks)},r(l(t.remarks)),11,Qe)]),e("td",Pe,[e("span",{class:"block max-w-[150px] truncate",title:a(t.assignedStaff)},r(a(t.assignedStaff,"Not assigned")),9,Je)]),e("td",Ke,[e("span",{class:m([n(_),n(F)(t.status)]),title:l(t.status)},r(l(t.status)),11,We)]),e("td",Xe,[e("span",{class:m([n(_),n(V)(t.category)]),title:l(t.category)},r(l(t.category)),11,Ye)]),e("td",Ze,r(g(t.estimatedCompletionDate)),1)]))),128)),u.value.length===0?(i(),d("tr",et,[...s[9]||(s[9]=[e("td",{colspan:"10",class:"px-4 py-10 text-center text-sm text-muted-foreground"}," No archived requests match your search. ",-1)])])):D("",!0)])])])])]))]),_:1},8,["breadcrumbs"])],64))}});export{mt as default};
