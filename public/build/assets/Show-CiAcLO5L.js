import{d as A,f as v,c as l,a as o,u as s,h as C,w as r,b as t,t as p,p as P,i as w,e as a,j as S,o as n,F as V,n as U,E as D,k as $,B,l as E}from"./app-Cclhwly9.js";import{_ as k}from"./HeadingSmall.vue_vue_type_script_setup_true_lang-Cwxr9xBi.js";import{_ as f,a as x,b as c}from"./Label.vue_vue_type_script_setup_true_lang-DX8dCyZw.js";import{a as y,_ as L}from"./AppLayout.vue_vue_type_script_setup_true_lang-pl8mKwt0.js";import{d as M}from"./lazy-CSzc0j1S.js";const O={class:"flex flex-1 flex-col gap-6 p-6"},R={class:"rounded-3xl border border-sidebar-border/60 bg-background p-6"},j={class:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between"},W={class:"mt-2 text-2xl font-semibold"},z={class:"text-sm text-muted-foreground"},I={class:"text-xs text-muted-foreground"},T={class:"flex flex-wrap gap-2"},q={class:"inline-flex items-center rounded-full bg-muted px-3 py-1 text-xs font-semibold text-foreground"},G={class:"grid gap-6 lg:grid-cols-[1.1fr_0.9fr]"},H={class:"space-y-6"},J={class:"rounded-3xl border border-sidebar-border/60 bg-background p-6"},K={class:"grid gap-2"},Q={class:"grid gap-2"},X={class:"grid gap-2"},Y={class:"rounded-3xl border border-sidebar-border/60 bg-background p-6"},Z={class:"grid gap-2"},ee=["value"],se={class:"grid gap-2"},te={class:"flex items-center gap-3"},oe={key:0,class:"text-sm text-emerald-600"},ie={class:"rounded-3xl border border-sidebar-border/60 bg-background p-6"},de={class:"grid gap-2"},re=["value"],ae={key:0,class:"text-sm text-emerald-600"},le={class:"flex items-center gap-3 text-sm"},ne={key:0,class:"text-sm text-emerald-600"},ue={class:"space-y-6"},me={class:"rounded-3xl border border-sidebar-border/60 bg-background p-6"},pe={class:"grid gap-2"},fe={class:"grid gap-2"},ge={key:0,class:"text-sm text-emerald-600"},ce={class:"rounded-3xl border border-sidebar-border/60 bg-background p-6"},be={key:0,class:"mt-4 text-sm text-muted-foreground"},_e={key:1,class:"mt-4 space-y-3 text-sm"},xe={class:"font-semibold text-foreground"},ve={class:"mt-1"},Ue=A({__name:"Show",props:{user:{},officeDesignation:{},officeDesignations:{},roleOptions:{},auditLogs:{}},setup(F){const d=F,N=[{title:"Dashboard",href:M().url},{title:"User management",href:"/admin/users"},{title:d.user.name,href:`/admin/users/${d.user.id}`}],u=v({name:d.user.name,email:d.user.email,phone:d.user.phone??""}),m=v({office_designation_id:d.user.office_designation_id??d.officeDesignation?.id??null,position_title:d.user.position_title??""}),b=v({role:d.user.role}),_=v({is_active:d.user.is_active}),g=v({password:"",password_confirmation:""});return(we,e)=>(n(),l(V,null,[o(s(C),{title:`Manage ${d.user.name}`},null,8,["title"]),o(L,{breadcrumbs:N},{default:r(()=>[t("div",O,[t("section",R,[t("div",j,[t("div",null,[e[14]||(e[14]=t("p",{class:"text-xs uppercase tracking-[0.3em] text-muted-foreground"}," User management ",-1)),t("h1",W,p(d.user.name),1),t("p",z,p(d.user.email),1),t("p",I," 2FA: "+p(d.user.two_factor_enabled?"Enabled":"Disabled"),1)]),t("div",T,[t("span",{class:P(["inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold",d.user.is_active?"bg-emerald-100 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200":"bg-rose-100 text-rose-700 dark:bg-rose-500/20 dark:text-rose-200"])},p(d.user.is_active?"Active":"Inactive"),3),t("span",q,p(d.roleOptions[d.user.role]||d.user.role),1)])])]),t("section",G,[t("div",H,[t("div",J,[o(k,{title:"Profile details",description:"Update name, email, and contact information."}),t("form",{onSubmit:e[3]||(e[3]=w(i=>s(u).patch(`/admin/users/${d.user.id}`),["prevent"])),class:"mt-6 space-y-6"},[t("div",K,[o(s(f),{for:"name"},{default:r(()=>[...e[15]||(e[15]=[a("Name",-1)])]),_:1}),o(s(x),{id:"name",modelValue:s(u).name,"onUpdate:modelValue":e[0]||(e[0]=i=>s(u).name=i)},null,8,["modelValue"]),o(c,{message:s(u).errors.name},null,8,["message"])]),t("div",Q,[o(s(f),{for:"email"},{default:r(()=>[...e[16]||(e[16]=[a("Email",-1)])]),_:1}),o(s(x),{id:"email",type:"email",modelValue:s(u).email,"onUpdate:modelValue":e[1]||(e[1]=i=>s(u).email=i)},null,8,["modelValue"]),o(c,{message:s(u).errors.email},null,8,["message"])]),t("div",X,[o(s(f),{for:"phone"},{default:r(()=>[...e[17]||(e[17]=[a("Phone",-1)])]),_:1}),o(s(x),{id:"phone",modelValue:s(u).phone,"onUpdate:modelValue":e[2]||(e[2]=i=>s(u).phone=i)},null,8,["modelValue"]),o(c,{message:s(u).errors.phone},null,8,["message"])]),o(s(y),{disabled:s(u).processing},{default:r(()=>[...e[18]||(e[18]=[a(" Save profile ",-1)])]),_:1},8,["disabled"])],32)]),t("div",Y,[o(k,{title:"Work details",description:"Update designated office and position."}),t("form",{onSubmit:e[6]||(e[6]=w(i=>s(m).patch(`/admin/users/${d.user.id}/work`),["prevent"])),class:"mt-6 space-y-6"},[t("div",Z,[o(s(f),{for:"office_designation_id"},{default:r(()=>[...e[19]||(e[19]=[a("Designated office",-1)])]),_:1}),S(t("select",{id:"office_designation_id","onUpdate:modelValue":e[4]||(e[4]=i=>s(m).office_designation_id=i),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[e[20]||(e[20]=t("option",{value:null,disabled:""},"Select an office",-1)),(n(!0),l(V,null,U(d.officeDesignations,i=>(n(),l("option",{key:i.id,value:i.id},p(i.name),9,ee))),128))],512),[[D,s(m).office_designation_id,void 0,{number:!0}]]),o(c,{message:s(m).errors.office_designation_id},null,8,["message"])]),t("div",se,[o(s(f),{for:"position_title"},{default:r(()=>[...e[21]||(e[21]=[a("Position / Designation",-1)])]),_:1}),o(s(x),{id:"position_title",modelValue:s(m).position_title,"onUpdate:modelValue":e[5]||(e[5]=i=>s(m).position_title=i)},null,8,["modelValue"]),o(c,{message:s(m).errors.position_title},null,8,["message"])]),t("div",te,[o(s(y),{disabled:s(m).processing},{default:r(()=>[...e[22]||(e[22]=[a(" Save work details ",-1)])]),_:1},8,["disabled"]),s(m).recentlySuccessful?(n(),l("p",oe," Work details saved. ")):$("",!0)])],32)]),t("div",ie,[o(k,{title:"Access controls",description:"Assign roles and update account status."}),t("form",{onSubmit:e[8]||(e[8]=w(i=>s(b).patch(`/admin/users/${d.user.id}/role`),["prevent"])),class:"mt-6 space-y-4"},[t("div",de,[o(s(f),{for:"role"},{default:r(()=>[...e[23]||(e[23]=[a("Role",-1)])]),_:1}),S(t("select",{id:"role","onUpdate:modelValue":e[7]||(e[7]=i=>s(b).role=i),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[(n(!0),l(V,null,U(d.roleOptions,(i,h)=>(n(),l("option",{key:h,value:h},p(i),9,re))),128))],512),[[D,s(b).role]]),o(c,{message:s(b).errors.role},null,8,["message"])]),o(s(y),{disabled:s(b).processing},{default:r(()=>[...e[24]||(e[24]=[a(" Update role ",-1)])]),_:1},8,["disabled"]),s(b).recentlySuccessful?(n(),l("p",ae," Role updated. ")):$("",!0)],32),t("form",{onSubmit:e[10]||(e[10]=w(i=>s(_).patch(`/admin/users/${d.user.id}/status`),["prevent"])),class:"mt-6 space-y-4"},[t("div",le,[S(t("input",{id:"is_active",type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=i=>s(_).is_active=i),class:"h-4 w-4 rounded border-slate-600 text-sky-500"},null,512),[[B,s(_).is_active]]),o(s(f),{for:"is_active"},{default:r(()=>[...e[25]||(e[25]=[a("Account active",-1)])]),_:1})]),o(c,{message:s(_).errors.is_active},null,8,["message"]),o(s(y),{variant:"secondary",disabled:s(_).processing},{default:r(()=>[...e[26]||(e[26]=[a(" Update status ",-1)])]),_:1},8,["disabled"]),s(_).recentlySuccessful?(n(),l("p",ne," Status updated. ")):$("",!0)],32)])]),t("div",ue,[t("div",me,[o(k,{title:"Password reset",description:"Set a new password for this account."}),t("form",{onSubmit:e[13]||(e[13]=w(i=>s(g).patch(`/admin/users/${d.user.id}/password`),["prevent"])),class:"mt-6 space-y-4"},[t("div",pe,[o(s(f),{for:"password"},{default:r(()=>[...e[27]||(e[27]=[a("New password",-1)])]),_:1}),o(s(x),{id:"password",type:"password",modelValue:s(g).password,"onUpdate:modelValue":e[11]||(e[11]=i=>s(g).password=i)},null,8,["modelValue"]),o(c,{message:s(g).errors.password},null,8,["message"])]),t("div",fe,[o(s(f),{for:"password_confirmation"},{default:r(()=>[...e[28]||(e[28]=[a("Confirm password",-1)])]),_:1}),o(s(x),{id:"password_confirmation",type:"password",modelValue:s(g).password_confirmation,"onUpdate:modelValue":e[12]||(e[12]=i=>s(g).password_confirmation=i)},null,8,["modelValue"])]),o(s(y),{variant:"secondary",disabled:s(g).processing},{default:r(()=>[...e[29]||(e[29]=[a(" Update password ",-1)])]),_:1},8,["disabled"]),s(g).recentlySuccessful?(n(),l("p",ge," Password updated. ")):$("",!0)],32)]),t("div",ce,[o(k,{title:"Audit trail",description:"Recent actions taken for this account."}),d.auditLogs.length?(n(),l("div",_e,[(n(!0),l(V,null,U(d.auditLogs,i=>(n(),l("div",{key:i.id,class:"rounded-xl border border-sidebar-border/60 px-4 py-3 text-xs text-muted-foreground"},[t("p",xe,p(i.action),1),t("p",ve,p(i.created_at),1)]))),128))])):(n(),l("div",be," No audit activity recorded yet. ")),o(s(E),{href:"/admin/audit-logs",class:"mt-4 inline-flex text-xs font-semibold uppercase tracking-[0.2em] text-muted-foreground hover:text-foreground"},{default:r(()=>[...e[30]||(e[30]=[a(" View full audit log ",-1)])]),_:1})])])])])]),_:1})],64))}});export{Ue as default};
