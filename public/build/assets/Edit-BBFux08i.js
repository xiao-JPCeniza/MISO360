import{d as P,f as R,r as w,g as V,c as l,a as u,u as o,h as M,w as _,b as t,i as N,k as b,p as c,o as a,F as x,t as m,j as g,e as p,v,B as O,l as B}from"./app-BKeQIzJd.js";import{_ as E}from"./AppLayout.vue_vue_type_script_setup_true_lang-D4ZJz0Dy.js";import{d as S}from"./lazy-CSzc0j1S.js";import{U as A,A as T,a as $}from"./upload-DSksIzvM.js";import{I as G}from"./image-CEZTpjPF.js";const I={class:"flex flex-1 flex-col gap-8 p-6"},W={class:"rounded-3xl border border-sidebar-border/50 bg-linear-to-br from-card to-card/80 p-6 shadow-lg shadow-black/5 dark:from-card dark:to-card/90 dark:shadow-black/20"},z=["src","alt"],J={key:0,class:"mt-2 text-sm text-rose-600"},q={class:"grid gap-6 sm:grid-cols-1"},H={key:0,class:"mt-2 text-sm text-rose-600"},K={key:0,class:"mt-2 text-sm text-rose-600"},Q={class:"mt-3 flex gap-3"},X={key:0,class:"mt-2 text-sm text-rose-600"},Y={key:0,class:"mt-2 text-sm text-rose-600"},Z={class:"flex items-center gap-3 rounded-xl border border-sidebar-border/50 bg-muted/20 p-4"},ee={key:0,class:"text-sm text-rose-600"},te={class:"flex flex-wrap gap-3 border-t border-sidebar-border/50 pt-6"},re=["disabled"],ne=P({__name:"Edit",props:{slide:{},textPositionOptions:{}},setup(y){const n=y,U=[{title:"Dashboard",href:S().url},{title:"Post Management",href:"/admin/posts"},{title:"Edit slide",href:`/admin/posts/${n.slide.id}/edit`}],r=R({image:null,title:n.slide.title,subtitle:n.slide.subtitle??"",text_position:n.slide.textPosition,sort_order:n.slide.sortOrder,is_active:n.slide.isActive}),d=w(null),f=w(!1),k=V(()=>d.value||(r.image instanceof File?null:n.slide.imageUrl));function D(s){const i=s.target.files?.[0];h(i??null)}function h(s){d.value&&URL.revokeObjectURL(d.value),d.value=null,r.image=s,r.clearErrors("image"),s&&(d.value=URL.createObjectURL(s))}function C(s){s.preventDefault(),f.value=!1;const e=s.dataTransfer?.files?.[0];e&&e.type.startsWith("image/")&&h(e)}function j(s){s.preventDefault(),f.value=!0}function F(){f.value=!1}function L(){const s=r.image instanceof File;r.transform(e=>({...e,sort_order:Number(e.sort_order),...s&&{image:r.image}})).patch(`/admin/posts/${n.slide.id}`,{forceFormData:s,onSuccess:()=>{s&&(r.image=null,d.value&&URL.revokeObjectURL(d.value),d.value=null)}})}return(s,e)=>(a(),l(x,null,[u(o(M),{title:"Edit slide – Post Management"}),u(E,{breadcrumbs:U},{default:_(()=>[t("div",I,[t("section",W,[e[18]||(e[18]=t("h1",{class:"text-2xl font-bold tracking-tight text-foreground"},"Edit slide",-1)),e[19]||(e[19]=t("p",{class:"mt-1 text-sm text-muted-foreground"}," Update the profile slide. Drag a new image to replace the current one, or leave it as is. ",-1)),t("form",{class:"mt-8 space-y-8",onSubmit:N(L,["prevent"])},[t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-semibold text-foreground"}," Background image ",-1)),t("div",{class:c(["relative mt-3 flex min-h-[200px] flex-col items-center justify-center rounded-2xl border-2 border-dashed transition-all duration-200",f.value?"border-primary bg-primary/10 dark:bg-primary/20":o(r).errors.image?"border-rose-300 bg-rose-50/50 dark:border-rose-500/50 dark:bg-rose-500/10":"border-sidebar-border/70 bg-muted/30 hover:border-primary/50 hover:bg-muted/50 dark:bg-muted/20"]),onDragover:j,onDragleave:F,onDrop:C},[k.value?(a(),l(x,{key:0},[t("img",{src:k.value,alt:y.slide.title,class:"max-h-64 w-full rounded-xl object-contain object-center shadow-inner"},null,8,z),e[6]||(e[6]=t("p",{class:"mt-3 text-sm font-medium text-muted-foreground"}," New image selected. Click or drag to replace again. ",-1))],64)):(a(),l(x,{key:1},[u(o(A),{class:"h-12 w-12 text-muted-foreground"}),e[7]||(e[7]=t("p",{class:"mt-3 text-sm font-medium text-foreground"}," Drag and drop to replace, or click to browse ",-1)),e[8]||(e[8]=t("p",{class:"mt-1 text-xs text-muted-foreground"}," JPG, PNG or WebP · Max 5 MB · Optional ",-1))],64)),t("input",{type:"file",accept:"image/jpeg,image/png,image/webp",class:"absolute inset-0 cursor-pointer opacity-0",onChange:D},null,32)],34),o(r).errors.image?(a(),l("p",J,m(o(r).errors.image),1)):b("",!0)]),t("div",q,[t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-semibold text-foreground"},[p(" Title "),t("span",{class:"text-rose-500"},"*")],-1)),g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>o(r).title=i),type:"text",maxlength:"255",class:"mt-2 w-full rounded-xl border border-sidebar-border/70 bg-background px-4 py-3 text-sm transition-shadow focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"},null,512),[[v,o(r).title]]),o(r).errors.title?(a(),l("p",H,m(o(r).errors.title),1)):b("",!0)]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-semibold text-foreground"}," Subtitle ",-1)),g(t("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>o(r).subtitle=i),type:"text",maxlength:"500",class:"mt-2 w-full rounded-xl border border-sidebar-border/70 bg-background px-4 py-3 text-sm transition-shadow focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"},null,512),[[v,o(r).subtitle]]),o(r).errors.subtitle?(a(),l("p",K,m(o(r).errors.subtitle),1)):b("",!0)])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-semibold text-foreground"},[p(" Text position on slide "),t("span",{class:"text-rose-500"},"*")],-1)),t("div",Q,[t("button",{type:"button",class:c(["flex flex-1 items-center justify-center gap-2 rounded-xl border-2 py-3 transition-all",o(r).text_position==="left"?"border-primary bg-primary/10 text-primary dark:bg-primary/20":"border-sidebar-border/70 bg-muted/30 text-muted-foreground hover:border-sidebar-border hover:bg-muted/50"]),onClick:e[2]||(e[2]=i=>o(r).text_position="left")},[u(o(T),{class:"h-5 w-5"}),e[12]||(e[12]=p(" Left ",-1))],2),t("button",{type:"button",class:c(["flex flex-1 items-center justify-center gap-2 rounded-xl border-2 py-3 transition-all",o(r).text_position==="right"?"border-primary bg-primary/10 text-primary dark:bg-primary/20":"border-sidebar-border/70 bg-muted/30 text-muted-foreground hover:border-sidebar-border hover:bg-muted/50"]),onClick:e[3]||(e[3]=i=>o(r).text_position="right")},[u(o($),{class:"h-5 w-5"}),e[13]||(e[13]=p(" Right ",-1))],2)]),o(r).errors.text_position?(a(),l("p",X,m(o(r).errors.text_position),1)):b("",!0)]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-semibold text-foreground"}," Display order ",-1)),g(t("input",{"onUpdate:modelValue":e[4]||(e[4]=i=>o(r).sort_order=i),type:"number",min:"0",class:"mt-2 w-full max-w-[140px] rounded-xl border border-sidebar-border/70 bg-background px-4 py-3 text-sm transition-shadow focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"},null,512),[[v,o(r).sort_order,void 0,{number:!0}]]),o(r).errors.sort_order?(a(),l("p",Y,m(o(r).errors.sort_order),1)):b("",!0)]),t("div",Z,[g(t("input",{"onUpdate:modelValue":e[5]||(e[5]=i=>o(r).is_active=i),type:"checkbox",id:"edit-is-active",class:"h-4 w-4 rounded border-sidebar-border/70 text-primary focus:ring-primary"},null,512),[[O,o(r).is_active]]),e[16]||(e[16]=t("label",{for:"edit-is-active",class:"text-sm font-medium text-foreground"}," Active — show this slide on the profile section ",-1))]),o(r).errors.is_active?(a(),l("p",ee,m(o(r).errors.is_active),1)):b("",!0),t("div",te,[t("button",{type:"submit",class:"inline-flex items-center gap-2 rounded-xl bg-primary px-5 py-2.5 text-sm font-semibold text-primary-foreground shadow-md shadow-primary/25 transition-all hover:shadow-lg hover:brightness-105 disabled:opacity-60 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",disabled:o(r).processing},[u(o(G),{class:"h-4 w-4"}),p(" "+m(o(r).processing?"Saving…":"Save changes"),1)],8,re),u(o(B),{href:"/admin/posts",class:"inline-flex items-center rounded-xl border border-sidebar-border/70 px-5 py-2.5 text-sm font-semibold transition-colors hover:bg-muted/60 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},{default:_(()=>[...e[17]||(e[17]=[p(" Cancel ",-1)])]),_:1})])],32)])])]),_:1})],64))}});export{ne as default};
